/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/@fullcalendar/multimonth@6.1.15/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{createPlugin as t}from"@fullcalendar/core/index.js";import{TableDateProfileGenerator as e,buildDayTableRenderRange as i,buildDayTableModel as l,DayTableSlicer as n,TableRows as o}from"@fullcalendar/daygrid/internal.js";import{createDuration as a,createFormatter as r,injectStyles as s,DateComponent as c,memoize as d,ViewContainer as h,formatIsoMonthStr as m,isPropsEqual as u,intersectRanges as f,getUniqueDomId as g,DayHeader as p}from"@fullcalendar/core/internal.js";import{createRef as b,createElement as y}from"@fullcalendar/core/preact.js";class R extends c{constructor(){super(...arguments),this.buildDayTableModel=d(l),this.slicer=new n,this.state={labelId:g()}}render(){const{props:t,state:e,context:i}=this,{dateProfile:l,forPrint:n}=t,{options:a}=i,r=this.buildDayTableModel(l,i.dateProfileGenerator),s=this.slicer.sliceProps(t,l,a.nextDayThreshold,i,r),c=null!=t.tableWidth?t.tableWidth/a.aspectRatio:null,d=r.cells.length,h=null!=c?c/d:null;return y("div",{ref:t.elRef,"data-date":t.isoDateStr,className:"fc-multimonth-month",style:{width:t.width},role:"grid","aria-labelledby":e.labelId},y("div",{className:"fc-multimonth-header",style:{marginBottom:h},role:"presentation"},y("div",{className:"fc-multimonth-title",id:e.labelId},i.dateEnv.format(t.dateProfile.currentRange.start,t.titleFormat)),y("table",{className:["fc-multimonth-header-table",i.theme.getClass("table")].join(" "),role:"presentation"},y("thead",{role:"rowgroup"},y(p,{dateProfile:t.dateProfile,dates:r.headerDates,datesRepDistinctDays:!1})))),y("div",{className:["fc-multimonth-daygrid","fc-daygrid","fc-daygrid-body",!n&&"fc-daygrid-body-balanced",n&&"fc-daygrid-body-unbalanced",n&&"fc-daygrid-body-natural"].join(" "),style:{marginTop:-h}},y("table",{className:["fc-multimonth-daygrid-table",i.theme.getClass("table")].join(" "),style:{height:n?"":c},role:"presentation"},y("tbody",{role:"rowgroup"},y(o,Object.assign({},s,{dateProfile:l,cells:r.cells,eventSelection:t.eventSelection,dayMaxEvents:!n,dayMaxEventRows:!n,showWeekNumbers:a.weekNumbers,clientWidth:t.clientWidth,clientHeight:t.clientHeight,forPrint:n}))))))}}const M=a(1,"month");function v(t,e,l,n,o){const{start:a,end:r}=e.currentRange;let s=a;const c=[];for(;s.valueOf()<r.valueOf();){const a=l.add(s,M),r={start:t.skipHiddenDays(s),end:t.skipHiddenDays(a,-1,!0)};let d=i({currentRange:r,snapToWeek:!0,fixedWeekCount:n,dateEnv:l});d={start:t.skipHiddenDays(d.start),end:t.skipHiddenDays(d.end,-1,!0)};const h=e.activeRange?f(e.activeRange,o?d:r):null;c.push({currentDate:e.currentDate,isValid:e.isValid,validRange:e.validRange,renderRange:d,activeRange:h,currentRange:r,currentRangeUnit:"month",isRangeAllDay:!0,dateIncrement:e.dateIncrement,slotMinTime:e.slotMaxTime,slotMaxTime:e.slotMinTime}),s=a}return c}const x=r({year:"numeric",month:"long"}),S=r({month:"long"});function w(t,e){return t||(e[0].currentRange.start.getUTCFullYear()!==e[e.length-1].currentRange.start.getUTCFullYear()?x:S)}const D={multiMonthTitleFormat:r,multiMonthMaxColumns:Number,multiMonthMinWidth:Number};s(".fc .fc-multimonth{border:1px solid var(--fc-border-color);display:flex;flex-wrap:wrap;overflow-x:hidden;overflow-y:auto}.fc .fc-multimonth-title{font-size:1.2em;font-weight:700;padding:1em 0;text-align:center}.fc .fc-multimonth-daygrid{background:var(--fc-page-bg-color)}.fc .fc-multimonth-daygrid-table,.fc .fc-multimonth-header-table{table-layout:fixed;width:100%}.fc .fc-multimonth-daygrid-table{border-top-style:hidden!important}.fc .fc-multimonth-singlecol .fc-multimonth{position:relative}.fc .fc-multimonth-singlecol .fc-multimonth-header{background:var(--fc-page-bg-color);position:relative;top:0;z-index:2}.fc .fc-multimonth-singlecol .fc-multimonth-daygrid{position:relative;z-index:1}.fc .fc-multimonth-singlecol .fc-multimonth-daygrid-table,.fc .fc-multimonth-singlecol .fc-multimonth-header-table{border-left-style:hidden;border-right-style:hidden}.fc .fc-multimonth-singlecol .fc-multimonth-month:last-child .fc-multimonth-daygrid-table{border-bottom-style:hidden}.fc .fc-multimonth-multicol{line-height:1}.fc .fc-multimonth-multicol .fc-multimonth-month{padding:0 1.2em 1.2em}.fc .fc-multimonth-multicol .fc-daygrid-more-link{border:1px solid var(--fc-event-border-color);display:block;float:none;padding:1px}.fc .fc-multimonth-compact{line-height:1}.fc .fc-multimonth-compact .fc-multimonth-daygrid-table,.fc .fc-multimonth-compact .fc-multimonth-header-table{font-size:.9em}.fc-media-screen .fc-multimonth-singlecol .fc-multimonth-header{position:sticky}.fc-media-print .fc-multimonth{overflow:visible}");var P=t({name:"@fullcalendar/multimonth",initialView:"multiMonthYear",optionRefiners:D,views:{multiMonth:{component:class extends c{constructor(){super(...arguments),this.splitDateProfileByMonth=d(v),this.buildMonthFormat=d(w),this.scrollElRef=b(),this.firstMonthElRef=b(),this.needsScrollReset=!1,this.handleSizing=t=>{t&&this.updateSize()}}render(){const{context:t,props:e,state:i}=this,{options:l}=t,{clientWidth:n,clientHeight:o}=i,a=i.monthHPadding||0,r=Math.min(null!=n?Math.floor(n/(l.multiMonthMinWidth+a)):1,l.multiMonthMaxColumns)||1,s=100/r+"%",c=null==n?null:n/r-a,d=null!=n&&1===r,u=this.splitDateProfileByMonth(t.dateProfileGenerator,e.dateProfile,t.dateEnv,!d&&l.fixedWeekCount,l.showNonCurrentDates),f=this.buildMonthFormat(l.multiMonthTitleFormat,u),g=["fc-multimonth",d?"fc-multimonth-singlecol":"fc-multimonth-multicol",null!=c&&c<400?"fc-multimonth-compact":"",e.isHeightAuto?"":"fc-scroller"];return y(h,{elRef:this.scrollElRef,elClasses:g,viewSpec:t.viewSpec},u.map(((t,i)=>{const l=m(t.currentRange.start);return y(R,Object.assign({},e,{key:l,isoDateStr:l,elRef:0===i?this.firstMonthElRef:void 0,titleFormat:f,dateProfile:t,width:s,tableWidth:c,clientWidth:n,clientHeight:o}))})))}componentDidMount(){this.updateSize(),this.context.addResizeHandler(this.handleSizing),this.requestScrollReset()}componentDidUpdate(t){u(t,this.props)||this.handleSizing(!1),t.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}updateSize(){const t=this.scrollElRef.current,e=this.firstMonthElRef.current;t&&this.setState({clientWidth:t.clientWidth,clientHeight:t.clientHeight}),e&&t&&null==this.state.monthHPadding&&this.setState({monthHPadding:t.clientWidth-e.firstChild.offsetWidth})}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&null!=this.state.monthHPadding){const{currentDate:t}=this.props.dateProfile,e=this.scrollElRef.current,i=e.querySelector(`[data-date="${m(t)}"]`);e.scrollTop=i.getBoundingClientRect().top-this.firstMonthElRef.current.getBoundingClientRect().top,this.needsScrollReset=!1}}shouldComponentUpdate(){return!0}},dateProfileGeneratorClass:e,multiMonthMinWidth:350,multiMonthMaxColumns:3},multiMonthYear:{type:"multiMonth",duration:{years:1},fixedWeekCount:!0,showNonCurrentDates:!1}}});export{P as default};
