/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/datatables.net-fixedheader@4.0.2/js/dataTables.fixedHeader.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import t from"jquery";import e from"datatables.net";export{default}from"datatables.net";let o=t;var i=0,s=function(t,d){if(!e.versionCheck("2"))throw"Warning: FixedHeader requires DataTables 2 or newer";if(!(this instanceof s))throw"FixedHeader must be initialised with the 'new' keyword.";!0===d&&(d={}),t=new e.Api(t),this.c=o.extend(!0,{},s.defaults,d),this.s={dt:t,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:o(window).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:t.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+i++,scrollLeft:{header:-1,footer:-1},enable:!0,autoDisable:!1},this.dom={floatingHeader:null,thead:o(t.table().header()),tbody:o(t.table().body()),tfoot:o(t.table().footer()),header:{host:null,floating:null,floatingParent:o('<div class="dtfh-floatingparent"><div></div></div>'),placeholder:null},footer:{host:null,floating:null,floatingParent:o('<div class="dtfh-floatingparent"><div></div></div>'),placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var r=t.settings()[0];if(r._fixedHeader)throw"FixedHeader already initialised on table "+r.nTable.id;r._fixedHeader=this,this._constructor()};o.extend(s.prototype,{destroy:function(){var t=this.dom;this.s.dt.off(".dtfc"),o(window).off(this.s.namespace),t.header.rightBlocker&&t.header.rightBlocker.remove(),t.header.leftBlocker&&t.header.leftBlocker.remove(),t.footer.rightBlocker&&t.footer.rightBlocker.remove(),t.footer.leftBlocker&&t.footer.leftBlocker.remove(),this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&t.tfoot.length&&this._modeChange("in-place","footer",!0)},enable:function(t,e,o){this.s.enable=t,this.s.enableType=o,(e||void 0===e)&&(this._positions(),this._scroll(!0))},enabled:function(){return this.s.enable},headerOffset:function(t){return void 0!==t&&(this.c.headerOffset=t,this.update()),this.c.headerOffset},footerOffset:function(t){return void 0!==t&&(this.c.footerOffset=t,this.update()),this.c.footerOffset},update:function(t){var e=this.s.dt.table().node();(this.s.enable||this.s.autoDisable)&&(o(e).is(":visible")?(this.s.autoDisable=!1,this.enable(!0,!1)):(this.s.autoDisable=!0,this.enable(!1,!1)),0!==o(e).children("thead").length&&(this._positions(),this._scroll(void 0===t||t),this._widths(this.dom.header),this._widths(this.dom.footer)))},_constructor:function(){var t=this,i=this.s.dt;o(window).on("scroll"+this.s.namespace,(function(){t._scroll()})).on("resize"+this.s.namespace,e.util.throttle((function(){t.s.position.windowHeight=o(window).height(),t.update()}),50));var s=o(".fh-fixedHeader");!this.c.headerOffset&&s.length&&(this.c.headerOffset=s.outerHeight());var d=o(".fh-fixedFooter");!this.c.footerOffset&&d.length&&(this.c.footerOffset=d.outerHeight()),i.on("column-reorder.dt.dtfc column-visibility.dt.dtfc column-sizing.dt.dtfc responsive-display.dt.dtfc",(function(e,o){t.update()})).on("draw.dt.dtfc",(function(e,o){t.update(o!==i.settings()[0])})),i.on("destroy.dtfc",(function(){t.destroy()})),this._positions(),this._scroll()},_clone:function(t,e){var i=this,s=this.s.dt,d=this.dom[t],r="header"===t?this.dom.thead:this.dom.tfoot;if("footer"!==t||!this._scrollEnabled())if(!e&&d.floating)d.floating.removeClass("fixedHeader-floating fixedHeader-locked");else{d.floating&&(null!==d.placeholder&&d.placeholder.remove(),d.floating.children().detach(),d.floating.remove());var a=o(s.table().node()),f=o(a.parent()),n=this._scrollEnabled();d.floating=o(s.table().node().cloneNode(!1)).attr("aria-hidden","true").css({top:0,left:0}).removeAttr("id"),d.floatingParent.css({width:f[0].offsetWidth,overflow:"hidden",height:"fit-content",position:"fixed",left:n?a.offset().left+f.scrollLeft():0}).css("header"===t?{top:this.c.headerOffset,bottom:""}:{top:"",bottom:this.c.footerOffset}).addClass("footer"===t?"dtfh-floatingparent-foot":"dtfh-floatingparent-head").appendTo("body").children().eq(0).append(d.floating),this._stickyPosition(d.floating,"-");var h=function(){var t=f.scrollLeft();i.s.scrollLeft={footer:t,header:t},d.floatingParent.scrollLeft(i.s.scrollLeft.header)};h(),f.off("scroll.dtfh").on("scroll.dtfh",h),d.floatingParent.children().css({width:"fit-content",paddingRight:i.s.dt.settings()[0].oBrowser.barWidth});let e=o("footer"===t?"div.dtfc-bottom-blocker":"div.dtfc-top-blocker",s.table().container());e.length&&e.clone().appendTo(d.floatingParent).css({position:"fixed",right:e.width()}),d.placeholder=r.clone(!1),d.placeholder.find("*[id]").removeAttr("id"),d.host.prepend(d.placeholder),d.floating.append(r),this._widths(d)}},_stickyPosition:function(t,e){if(this._scrollEnabled()){var i="rtl"===o(this.s.dt.table().node()).css("direction");t.find("th").each((function(){if("sticky"===o(this).css("position")){var t,e=o(this).css("right"),s=o(this).css("left");"auto"===e||i?"auto"!==s&&i&&(t=+s.replace(/px/g,""),o(this).css("left",t>0?t:0)):(t=+e.replace(/px/g,""),o(this).css("right",t>0?t:0))}}))}},_horizontal:function(t,e){var i=this.dom[t],s=this.s.scrollLeft;if(i.floating&&s[t]!==e){if(this._scrollEnabled()){var d=o(o(this.s.dt.table().node()).parent()).scrollLeft();i.floating.scrollLeft(d),i.floatingParent.scrollLeft(d)}s[t]=e}},_modeChange:function(t,e,i){var s=this.dom[e],d=this.s.position,r=this._scrollEnabled();if("footer"!==e||!r){var a=function(t){s.floating[0].style.setProperty("width",t+"px","important"),r||s.floatingParent[0].style.setProperty("width",t+"px","important")},f=this.dom["footer"===e?"tfoot":"thead"],n=o.contains(f[0],document.activeElement)?document.activeElement:null,h=o(o(this.s.dt.table().node()).parent());if("in-place"===t)s.placeholder&&(s.placeholder.remove(),s.placeholder=null),o.contains(s.host[0],f[0])||("header"===e?s.host.prepend(f):s.host.append(f)),s.floating&&(s.floating.remove(),s.floating=null,this._stickyPosition(s.host,"+")),s.floatingParent&&(s.floatingParent.find("div.dtfc-top-blocker").remove(),s.floatingParent.remove()),o(o(s.host.parent()).parent()).scrollLeft(h.scrollLeft());else if("in"===t){this._clone(e,i);var l,c=h.offset(),p=o(document).scrollTop(),g=p+o(window).height(),u=r?c.top:d.tbodyTop,m=r?c.top+h.outerHeight():d.tfootTop;l="footer"===e?u>g?d.tfootHeight:u+d.tfootHeight-g:p+this.c.headerOffset+d.theadHeight-m;var b="header"===e?"top":"bottom",v=this.c[e+"Offset"]-(l>0?l:0);s.floating.addClass("fixedHeader-floating"),s.floatingParent.css(b,v).css({left:d.left,"z-index":3}),a(d.width),"footer"===e&&s.floating.css("top","")}else"below"===t?(this._clone(e,i),s.floating.addClass("fixedHeader-locked"),s.floatingParent.css({position:"absolute",top:d.tfootTop-d.theadHeight,left:d.left+"px"}),a(d.width)):"above"===t&&(this._clone(e,i),s.floating.addClass("fixedHeader-locked"),s.floatingParent.css({position:"absolute",top:d.tbodyTop,left:d.left+"px"}),a(d.width));n&&n!==document.activeElement&&setTimeout((function(){n.focus()}),10),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[e+"Mode"]=t}},_positions:function(){var t=this.s.dt,e=t.table(),i=this.s.position,s=this.dom,d=o(e.node()),r=this._scrollEnabled(),a=o(t.table().header()),f=o(t.table().footer()),n=s.tbody,h=d.parent();i.visible=d.is(":visible"),i.width=d.outerWidth(),i.left=d.offset().left,i.theadTop=a.offset().top,i.tbodyTop=r?h.offset().top:n.offset().top,i.tbodyHeight=r?h.outerHeight():n.outerHeight(),i.theadHeight=a.outerHeight(),i.theadBottom=i.theadTop+i.theadHeight,i.tfootTop=i.tbodyTop+i.tbodyHeight,f.length?(i.tfootBottom=i.tfootTop+f.outerHeight(),i.tfootHeight=f.outerHeight()):(i.tfootBottom=i.tfootTop,i.tfootHeight=0)},_scroll:function(t){if(!this.s.dt.settings()[0].bDestroying){var e,i,s=this._scrollEnabled(),d=o(this.s.dt.table().node()).parent(),r=d.offset(),a=d.outerHeight(),f=o(document).scrollLeft(),n=o(document).scrollTop(),h=o(window).height()+n,l=this.s.position,c=s?r.top:l.tbodyTop,p=s?r.left:l.left,g=s?r.top+a:l.tfootTop,u=s?d.outerWidth():l.tbodyWidth;if(this.c.header){if(this.s.enable)if(!l.visible||n+this.c.headerOffset+l.theadHeight<=c)e="in-place";else if(n+this.c.headerOffset+l.theadHeight>c&&n+this.c.headerOffset+l.theadHeight<g)if(e="in",n+this.c.headerOffset+l.theadHeight>g||void 0===this.dom.header.floatingParent)t=!0;else{var m=this.dom.header.floatingParent.css({top:this.c.headerOffset,position:"fixed"}).children().eq(0);0===m.find(this.dom.header.floating).length&&m.append(this.dom.header.floating)}else e="below";else e="in-place";(t||e!==this.s.headerMode)&&this._modeChange(e,"header",t),this._horizontal("header",f)}var b={offset:{top:0,left:0},height:0},v={offset:{top:0,left:0},height:0};if(this.c.footer&&this.dom.tfoot.length&&this.dom.tfoot.find("th, td").length){this.s.enable?!l.visible||l.tfootBottom+this.c.footerOffset<=h?i="in-place":g+l.tfootHeight+this.c.footerOffset>h&&c+this.c.footerOffset<h?(i="in",t=!0):i="above":i="in-place",(t||i!==this.s.footerMode)&&this._modeChange(i,"footer",t),this._horizontal("footer",f);var H=function(t){return{offset:t.offset(),height:t.outerHeight()}};if(b=this.dom.header.floating?H(this.dom.header.floating):H(this.dom.thead),v=this.dom.footer.floating?H(this.dom.footer.floating):H(this.dom.tfoot),s&&v.offset.top>n){var x=n-r.top,w=h+(x>-b.height?x:0)-(b.offset.top+(x<-b.height?b.height:0)+v.height);w<0&&(w=0),d.outerHeight(w),Math.round(d.outerHeight())>=Math.round(w)?o(this.dom.tfoot.parent()).addClass("fixedHeader-floating"):o(this.dom.tfoot.parent()).removeClass("fixedHeader-floating")}}if(this.dom.header.floating&&this.dom.header.floatingParent.css("left",p-f),this.dom.footer.floating&&this.dom.footer.floatingParent.css("left",p-f),void 0!==this.s.dt.settings()[0]._fixedColumns){var _=function(t,i,s){if(void 0===s){var d=o("div.dtfc-"+t+"-"+i+"-blocker");s=0===d.length?null:d.clone().css("z-index",1)}return null!==s&&("in"===e||"below"===e?s.appendTo("body").css({top:"top"===i?b.offset.top:v.offset.top,left:"right"===t?p+u-s.width():p}):s.detach()),s};this.dom.header.rightBlocker=_("right","top",this.dom.header.rightBlocker),this.dom.header.leftBlocker=_("left","top",this.dom.header.leftBlocker),this.dom.footer.rightBlocker=_("right","bottom",this.dom.footer.rightBlocker),this.dom.footer.leftBlocker=_("left","bottom",this.dom.footer.leftBlocker)}}},_scrollEnabled:function(){var t=this.s.dt.settings()[0].oScroll;return""!==t.sY||""!==t.sX},_widths:function(t){if(t&&t.placeholder){var e=o(this.s.dt.table().node()),i=o(e.parent());t.floatingParent.css("width",i[0].offsetWidth),t.floating.css("width",e[0].offsetWidth),o("colgroup",t.floating).remove();for(var s=t.placeholder.parent().find("colgroup").clone().appendTo(t.floating).find("col"),d=this.s.dt.columns(":visible").widths(),r=0;r<d.length;r++)s.eq(r).css("width",d[r])}}}),s.version="4.0.2",s.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},o.fn.dataTable.FixedHeader=s,o.fn.DataTable.FixedHeader=s,o(document).on("init.dt.dtfh",(function(t,i,d){if("dt"===t.namespace){var r=i.oInit.fixedHeader,a=e.defaults.fixedHeader;if((r||a)&&!i._fixedHeader){var f=o.extend({},a,r);!1!==r&&new s(i,f)}}})),e.Api.register("fixedHeader()",(function(){})),e.Api.register("fixedHeader.adjust()",(function(){return this.iterator("table",(function(t){var e=t._fixedHeader;e&&e.update()}))})),e.Api.register("fixedHeader.enable()",(function(t){return this.iterator("table",(function(e){var o=e._fixedHeader;t=void 0===t||t,o&&t!==o.enabled()&&o.enable(t)}))})),e.Api.register("fixedHeader.enabled()",(function(){if(this.context.length){var t=this.context[0]._fixedHeader;if(t)return t.enabled()}return!1})),e.Api.register("fixedHeader.disable()",(function(){return this.iterator("table",(function(t){var e=t._fixedHeader;e&&e.enabled()&&e.enable(!1)}))})),o.each(["header","footer"],(function(t,o){e.Api.register("fixedHeader."+o+"Offset()",(function(t){var e=this.context;return void 0===t?e.length&&e[0]._fixedHeader?e[0]._fixedHeader[o+"Offset"]():void 0:this.iterator("table",(function(e){var i=e._fixedHeader;i&&i[o+"Offset"](t)}))}))}));
