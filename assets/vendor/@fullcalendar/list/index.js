/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@fullcalendar/list@6.1.17/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{createPlugin as e}from"@fullcalendar/core/index.js";import{createFormatter as t,injectStyles as n,DateComponent as a,memoize as s,getUniqueDomId as i,ViewContainer as r,Scroller as l,ContentContainer as o,NowTimer as d,formatDayString as c,sortEventSegs as f,getSegMeta as u,sliceEventStore as g,intersectRanges as h,startOfDay as v,addDays as m,BaseComponent as p,getDateMeta as y,buildNavLinkAttrs as x,getDayClassNames as b,EventContainer as D,getSegAnchorAttrs as S,isMultiDayRange as C,buildSegTimeText as w,identity as R}from"@fullcalendar/core/internal.js";import{createElement as T,Fragment as I}from"@fullcalendar/core/preact.js";class k extends p{constructor(){super(...arguments),this.state={textId:i()}}render(){let{theme:e,dateEnv:t,options:n,viewApi:a}=this.context,{cellId:s,dayDate:i,todayRange:r}=this.props,{textId:l}=this.state,d=y(i,r),f=n.listDayFormat?t.format(i,n.listDayFormat):"",u=n.listDaySideFormat?t.format(i,n.listDaySideFormat):"",g=Object.assign({date:t.toDate(i),view:a,textId:l,text:f,sideText:u,navLinkAttrs:x(this.context,i),sideNavLinkAttrs:x(this.context,i,"day",!1)},d);return T(o,{elTag:"tr",elClasses:["fc-list-day",...b(d,e)],elAttrs:{"data-date":c(i)},renderProps:g,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:H,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},(t=>T("th",{scope:"colgroup",colSpan:3,id:s,"aria-labelledby":l},T(t,{elTag:"div",elClasses:["fc-list-day-cushion",e.getClass("tableCellShaded")]}))))}}function H(e){return T(I,null,e.text&&T("a",Object.assign({id:e.textId,className:"fc-list-day-text"},e.navLinkAttrs),e.text),e.sideText&&T("a",Object.assign({"aria-hidden":!0,className:"fc-list-day-side-text"},e.sideNavLinkAttrs),e.sideText))}const E=t({hour:"numeric",minute:"2-digit",meridiem:"short"});class N extends p{render(){let{props:e,context:t}=this,{options:n}=t,{seg:a,timeHeaderId:s,eventHeaderId:i,dateHeaderId:r}=e,l=n.eventTimeFormat||E;return T(D,Object.assign({},e,{elTag:"tr",elClasses:["fc-list-event",a.eventRange.def.url&&"fc-event-forced-url"],defaultGenerator:()=>function(e,t){let n=S(e,t);return T("a",Object.assign({},n),e.eventRange.def.title)}(a,t),seg:a,timeText:"",disableDragging:!0,disableResizing:!0}),((e,n)=>T(I,null,function(e,t,n,a,s){let{options:i}=n;if(!1!==i.displayEventTime){let r,l=e.eventRange.def,d=e.eventRange.instance,c=!1;if(l.allDay?c=!0:C(e.eventRange.range)?e.isStart?r=w(e,t,n,null,null,d.range.start,e.end):e.isEnd?r=w(e,t,n,null,null,e.start,d.range.end):c=!0:r=w(e,t,n),c){let e={text:n.options.allDayText,view:n.viewApi};return T(o,{elTag:"td",elClasses:["fc-list-event-time"],elAttrs:{headers:`${a} ${s}`},renderProps:e,generatorName:"allDayContent",customGenerator:i.allDayContent,defaultGenerator:A,classNameGenerator:i.allDayClassNames,didMount:i.allDayDidMount,willUnmount:i.allDayWillUnmount})}return T("td",{className:"fc-list-event-time"},r)}return null}(a,l,t,s,r),T("td",{"aria-hidden":!0,className:"fc-list-event-graphic"},T("span",{className:"fc-list-event-dot",style:{borderColor:n.borderColor||n.backgroundColor}})),T(e,{elTag:"td",elClasses:["fc-list-event-title"],elAttrs:{headers:`${i} ${r}`}}))))}}function A(e){return e.text}function F(e){return e.text}function O(e){let t=v(e.renderRange.start),n=e.renderRange.end,a=[],s=[];for(;t<n;)a.push(t),s.push({start:t,end:m(t,1)}),t=m(t,1);return{dayDates:a,dayRanges:s}}n(':root{--fc-list-event-dot-width:10px;--fc-list-event-hover-bg-color:#f5f5f5}.fc-theme-standard .fc-list{border:1px solid var(--fc-border-color)}.fc .fc-list-empty{align-items:center;background-color:var(--fc-neutral-bg-color);display:flex;height:100%;justify-content:center}.fc .fc-list-empty-cushion{margin:5em 0}.fc .fc-list-table{border-style:hidden;width:100%}.fc .fc-list-table tr>*{border-left:0;border-right:0}.fc .fc-list-sticky .fc-list-day>*{background:var(--fc-page-bg-color);position:sticky;top:0}.fc .fc-list-table thead{left:-10000px;position:absolute}.fc .fc-list-table tbody>tr:first-child th{border-top:0}.fc .fc-list-table th{padding:0}.fc .fc-list-day-cushion,.fc .fc-list-table td{padding:8px 14px}.fc .fc-list-day-cushion:after{clear:both;content:"";display:table}.fc-theme-standard .fc-list-day-cushion{background-color:var(--fc-neutral-bg-color)}.fc-direction-ltr .fc-list-day-text,.fc-direction-rtl .fc-list-day-side-text{float:left}.fc-direction-ltr .fc-list-day-side-text,.fc-direction-rtl .fc-list-day-text{float:right}.fc-direction-ltr .fc-list-table .fc-list-event-graphic{padding-right:0}.fc-direction-rtl .fc-list-table .fc-list-event-graphic{padding-left:0}.fc .fc-list-event.fc-event-forced-url{cursor:pointer}.fc .fc-list-event:hover td{background-color:var(--fc-list-event-hover-bg-color)}.fc .fc-list-event-graphic,.fc .fc-list-event-time{white-space:nowrap;width:1px}.fc .fc-list-event-dot{border:calc(var(--fc-list-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-list-event-dot-width)/2);box-sizing:content-box;display:inline-block;height:0;width:0}.fc .fc-list-event-title a{color:inherit;text-decoration:none}.fc .fc-list-event.fc-event-forced-url:hover a{text-decoration:underline}');function j(e){return!1===e?null:t(e)}var G=e({name:"@fullcalendar/list",optionRefiners:{listDayFormat:j,listDaySideFormat:j,noEventsClassNames:R,noEventsContent:R,noEventsDidMount:R,noEventsWillUnmount:R},views:{list:{component:class extends a{constructor(){super(...arguments),this.computeDateVars=s(O),this.eventStoreToSegs=s(this._eventStoreToSegs),this.state={timeHeaderId:i(),eventHeaderId:i(),dateHeaderIdRoot:i()},this.setRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e}):this.context.unregisterInteractiveComponent(this)}}render(){let{props:e,context:t}=this,{dayDates:n,dayRanges:a}=this.computeDateVars(e.dateProfile),s=this.eventStoreToSegs(e.eventStore,e.eventUiBases,a);return T(r,{elRef:this.setRootEl,elClasses:["fc-list",t.theme.getClass("table"),!1!==t.options.stickyHeaderDates?"fc-list-sticky":""],viewSpec:t.viewSpec},T(l,{liquid:!e.isHeightAuto,overflowX:e.isHeightAuto?"visible":"hidden",overflowY:e.isHeightAuto?"visible":"auto"},s.length>0?this.renderSegList(s,n):this.renderEmptyMessage()))}renderEmptyMessage(){let{options:e,viewApi:t}=this.context,n={text:e.noEventsText,view:t};return T(o,{elTag:"div",elClasses:["fc-list-empty"],renderProps:n,generatorName:"noEventsContent",customGenerator:e.noEventsContent,defaultGenerator:F,classNameGenerator:e.noEventsClassNames,didMount:e.noEventsDidMount,willUnmount:e.noEventsWillUnmount},(e=>T(e,{elTag:"div",elClasses:["fc-list-empty-cushion"]})))}renderSegList(e,t){let{theme:n,options:a}=this.context,{timeHeaderId:s,eventHeaderId:i,dateHeaderIdRoot:r}=this.state,l=function(e){let t,n,a=[];for(t=0;t<e.length;t+=1)n=e[t],(a[n.dayIndex]||(a[n.dayIndex]=[])).push(n);return a}(e);return T(d,{unit:"day"},((e,o)=>{let d=[];for(let n=0;n<l.length;n+=1){let g=l[n];if(g){let l=c(t[n]),h=r+"-"+l;d.push(T(k,{key:l,cellId:h,dayDate:t[n],todayRange:o})),g=f(g,a.eventOrder);for(let t of g)d.push(T(N,Object.assign({key:l+":"+t.eventRange.instance.instanceId,seg:t,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,timeHeaderId:s,eventHeaderId:i,dateHeaderId:h},u(t,o,e))))}}return T("table",{className:"fc-list-table "+n.getClass("table")},T("thead",null,T("tr",null,T("th",{scope:"col",id:s},a.timeHint),T("th",{scope:"col","aria-hidden":!0}),T("th",{scope:"col",id:i},a.eventHint))),T("tbody",null,d))}))}_eventStoreToSegs(e,t,n){return this.eventRangesToSegs(g(e,t,this.props.dateProfile.activeRange,this.context.options.nextDayThreshold).fg,n)}eventRangesToSegs(e,t){let n=[];for(let a of e)n.push(...this.eventRangeToSegs(a,t));return n}eventRangeToSegs(e,t){let n,a,s,{dateEnv:i}=this.context,{nextDayThreshold:r}=this.context.options,l=e.range,o=e.def.allDay,d=[];for(n=0;n<t.length;n+=1)if(a=h(l,t[n]),a&&(s={component:this,eventRange:e,start:a.start,end:a.end,isStart:e.isStart&&a.start.valueOf()===l.start.valueOf(),isEnd:e.isEnd&&a.end.valueOf()===l.end.valueOf(),dayIndex:n},d.push(s),!s.isEnd&&!o&&n+1<t.length&&l.end<i.add(t[n+1].start,r))){s.end=l.end,s.isEnd=!0;break}return d}},buttonTextKey:"list",listDayFormat:{month:"long",day:"numeric",year:"numeric"}},listDay:{type:"list",duration:{days:1},listDayFormat:{weekday:"long"}},listWeek:{type:"list",duration:{weeks:1},listDayFormat:{weekday:"long"},listDaySideFormat:{month:"long",day:"numeric",year:"numeric"}},listMonth:{type:"list",duration:{month:1},listDaySideFormat:{weekday:"long"}},listYear:{type:"list",duration:{year:1},listDaySideFormat:{weekday:"long"}}}});export{G as default};
