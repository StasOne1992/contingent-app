/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/@cropper/element-shade@2.0.0/dist/element-shade.esm.raw.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import t from"@cropper/element";import{CROPPER_SHADE as n,CROPPER_CANVAS as s,CROPPER_SELECTION as i,ACTION_SELECT as e,on as h,EVENT_ACTION_START as a,EVENT_ACTION_END as o,EVENT_CHANGE as r,off as c,isNumber as d,WINDOW as l}from"@cropper/utils";const $=new WeakMap;class C extends t{constructor(){super(...arguments),this.$onCanvasChange=null,this.$onCanvasActionEnd=null,this.$onCanvasActionStart=null,this.$style=":host{display:block;height:0;left:0;outline:var(--theme-color) solid 1px;position:relative;top:0;width:0}:host([transparent]){outline-color:transparent}",this.x=0,this.y=0,this.width=0,this.height=0,this.slottable=!1,this.themeColor="rgba(0, 0, 0, 0.65)"}set $canvas(t){$.set(this,t)}get $canvas(){return $.get(this)}static get observedAttributes(){return super.observedAttributes.concat(["height","width","x","y"])}connectedCallback(){super.connectedCallback();const t=this.closest(this.$getTagNameOf(s));if(t){this.$canvas=t,this.style.position="absolute";const n=t.querySelector(this.$getTagNameOf(i));n&&(this.$onCanvasActionStart=t=>{n.hidden&&t.detail.action===e&&(this.hidden=!1)},this.$onCanvasActionEnd=t=>{n.hidden&&t.detail.action===e&&(this.hidden=!0)},this.$onCanvasChange=t=>{const{x:s,y:i,width:e,height:h}=t.detail;this.$change(s,i,e,h),(n.hidden||0===s&&0===i&&0===e&&0===h)&&(this.hidden=!0)},h(t,a,this.$onCanvasActionStart),h(t,o,this.$onCanvasActionEnd),h(t,r,this.$onCanvasChange))}this.$render()}disconnectedCallback(){const{$canvas:t}=this;t&&(this.$onCanvasActionStart&&(c(t,a,this.$onCanvasActionStart),this.$onCanvasActionStart=null),this.$onCanvasActionEnd&&(c(t,o,this.$onCanvasActionEnd),this.$onCanvasActionEnd=null),this.$onCanvasChange&&(c(t,r,this.$onCanvasChange),this.$onCanvasChange=null)),super.disconnectedCallback()}$change(t,n,s=this.width,i=this.height){return d(t)&&d(n)&&d(s)&&d(i)&&(t!==this.x||n!==this.y||s!==this.width||i!==this.height)?(this.hidden&&(this.hidden=!1),this.x=t,this.y=n,this.width=s,this.height=i,this.$render()):this}$reset(){return this.$change(0,0,0,0)}$render(){return this.$setStyles({transform:`translate(${this.x}px, ${this.y}px)`,width:this.width,height:this.height,outlineWidth:l.innerWidth})}}C.$name=n,C.$version="2.0.0";export{C as default};
