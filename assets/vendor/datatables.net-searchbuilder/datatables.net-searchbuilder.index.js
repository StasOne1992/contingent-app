/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/datatables.net-searchbuilder@1.8.2/js/dataTables.searchBuilder.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import t from"jquery";import i from"datatables.net";export{default}from"datatables.net";
/*! SearchBuilder 1.8.2
 * Â©SpryMedia Ltd - datatables.net/license/mit
 */let e=t;!function(){var t,n;function s(){var t=i.use("moment");return t||window.moment}function r(){var t=i.use("luxon");return t||window.luxon}var o,a=function(){function e(i,s,r,o,a,d,l){void 0===o&&(o=0),void 0===a&&(a=1),void 0===d&&(d=void 0),void 0===l&&(l=!1);var u=this;this.classes=t.extend(!0,{},e.classes),this.c=t.extend(!0,{},e.defaults,t.fn.dataTable.ext.searchBuilder,s);var c=this.c.i18n;if(this.s={condition:void 0,conditions:{},data:void 0,dataIdx:-1,dataPoints:[],dateFormat:!1,depth:a,dt:i,filled:!1,index:o,liveSearch:l,origData:void 0,preventRedraw:!1,serverData:d,topGroup:r,type:"",value:[]},this.dom={buttons:t("<div/>").addClass(this.classes.buttonContainer),condition:t("<select disabled/>").addClass(this.classes.condition).addClass(this.classes.dropDown).addClass(this.classes.italic).attr("autocomplete","hacking"),conditionTitle:t('<option value="" disabled selected hidden/>').html(this.s.dt.i18n("searchBuilder.condition",c.condition)),container:t("<div/>").addClass(this.classes.container),data:t("<select/>").addClass(this.classes.data).addClass(this.classes.dropDown).addClass(this.classes.italic),dataTitle:t('<option value="" disabled selected hidden/>').html(this.s.dt.i18n("searchBuilder.data",c.data)),defaultValue:t("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.select).addClass(this.classes.italic),delete:t("<button/>").html(this.s.dt.i18n("searchBuilder.delete",c.delete)).addClass(this.classes.delete).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.deleteTitle",c.deleteTitle)).attr("type","button"),inputCont:t("<div/>").addClass(this.classes.inputCont),left:t("<button/>").html(this.s.dt.i18n("searchBuilder.left",c.left)).addClass(this.classes.left).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.leftTitle",c.leftTitle)).attr("type","button"),right:t("<button/>").html(this.s.dt.i18n("searchBuilder.right",c.right)).addClass(this.classes.right).addClass(this.classes.button).attr("title",this.s.dt.i18n("searchBuilder.rightTitle",c.rightTitle)).attr("type","button"),value:[t("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select)],valueTitle:t('<option value="--valueTitle--" disabled selected hidden/>').html(this.s.dt.i18n("searchBuilder.value",c.value))},this.c.greyscale){this.dom.data.addClass(this.classes.greyscale),this.dom.condition.addClass(this.classes.greyscale),this.dom.defaultValue.addClass(this.classes.greyscale);for(var h=0,p=this.dom.value;h<p.length;h++){p[h].addClass(this.classes.greyscale)}}return t(window).on("resize.dtsb",n.util.throttle((function(){u.s.topGroup.trigger("dtsb-redrawLogic")}))),this._buildCriteria(),this}return e._escapeHTML=function(t){return t.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},e.prototype.doSearch=function(){this.c.liveSearch&&this.s.dt.draw()},e.parseNumFmt=function(t){return+t.replace(/(?!^-)[^0-9.]/g,"")},e.prototype.updateArrows=function(i){void 0===i&&(i=!1),this.dom.container.children().detach(),this.dom.container.append(this.dom.data).append(this.dom.condition).append(this.dom.inputCont),this.setListeners(),void 0!==this.dom.value[0]&&t(this.dom.value[0]).trigger("dtsb-inserted");for(var e=1;e<this.dom.value.length;e++)this.dom.inputCont.append(this.dom.value[e]),t(this.dom.value[e]).trigger("dtsb-inserted");this.s.depth>1&&this.dom.buttons.append(this.dom.left),(!1===this.c.depthLimit||this.s.depth<this.c.depthLimit)&&i?this.dom.buttons.append(this.dom.right):this.dom.right.remove(),this.dom.buttons.append(this.dom.delete),this.dom.container.append(this.dom.buttons)},e.prototype.destroy=function(){this.dom.data.off(".dtsb"),this.dom.condition.off(".dtsb"),this.dom.delete.off(".dtsb");for(var t=0,i=this.dom.value;t<i.length;t++){i[t].off(".dtsb")}this.dom.container.remove()},e.prototype.search=function(t,i){var e=this.s.dt.settings()[0],n=this.s.conditions[this.s.condition];if(void 0!==this.s.condition&&void 0!==n){var s=t[this.s.dataIdx];if(this.s.type&&this.s.type.includes("num")&&(""!==e.oLanguage.sDecimal||""!==e.oLanguage.sThousands)){var r=[t[this.s.dataIdx]];if(""!==e.oLanguage.sDecimal&&(r=t[this.s.dataIdx].split(e.oLanguage.sDecimal)),""!==e.oLanguage.sThousands)for(var o=0;o<r.length;o++)r[o]=r[o].replace(e.oLanguage.sThousands,",");s=r.join(".")}if("filter"!==this.c.orthogonal.search&&(s=e.fastData(i,this.s.dataIdx,"string"==typeof this.c.orthogonal?this.c.orthogonal:this.c.orthogonal.search)),"array"===this.s.type){Array.isArray(s)||(s=[s]),s.sort();for(var a=0,d=s;a<d.length;a++){var l=d[a];l&&"string"==typeof l&&(l=l.replace(/[\r\n\u2028]/g," "))}}else null!==s&&"string"==typeof s&&(s=s.replace(/[\r\n\u2028]/g," "));return this.s.type.includes("html")&&"string"==typeof s&&(s=s.replace(/(<([^>]+)>)/gi,"")),null===s&&(s=""),n.search(s,this.s.value,this)}},e.prototype.getDetails=function(t){var i;void 0===t&&(t=!1);var e=this.s.dt.settings()[0];if(null===this.s.type||!["num","num-fmt","html-num","html-num-fmt"].includes(this.s.type)||""===e.oLanguage.sDecimal&&""===e.oLanguage.sThousands){if(null!==this.s.type&&t){var n=s(),o=r();if(!this.s.type.includes("date")&&!this.s.type.includes("time")||s||r){if(this.s.type.includes("moment")||this.s.type.includes("datetime")&&s)for(i=0;i<this.s.value.length;i++)this.s.value[i]&&this.s.value[i].length>0&&n(this.s.value[i],this.s.dateFormat,!0).isValid()&&(this.s.value[i]=n(this.s.value[i],this.s.dateFormat).format("YYYY-MM-DD HH:mm:ss"));else if(this.s.type.includes("luxon")||this.s.type.includes("datetime")&&r)for(i=0;i<this.s.value.length;i++)this.s.value[i]&&this.s.value[i].length>0&&null===o.DateTime.fromFormat(this.s.value[i],this.s.dateFormat).invalid&&(this.s.value[i]=o.DateTime.fromFormat(this.s.value[i],this.s.dateFormat).toFormat("yyyy-MM-dd HH:mm:ss"))}else for(i=0;i<this.s.value.length;i++)null===this.s.value[i].match(/^\d{4}-([0]\d|1[0-2])-([0-2]\d|3[01])$/g)&&(this.s.value[i]="")}}else for(i=0;i<this.s.value.length;i++){var a=[this.s.value[i].toString()];if(""!==e.oLanguage.sDecimal&&(a=this.s.value[i].split(e.oLanguage.sDecimal)),""!==e.oLanguage.sThousands)for(var d=0;d<a.length;d++)a[d]=a[d].replace(e.oLanguage.sThousands,",");this.s.value[i]=a.join(".")}if(this.s.type&&this.s.type.includes("num")&&this.s.dt.page.info().serverSide)for(i=0;i<this.s.value.length;i++)this.s.value[i]=this.s.value[i].replace(/[^0-9.\-]/g,"");return{condition:this.s.condition,data:this.s.data,origData:this.s.origData,type:this.s.type,value:this.s.value.map((function(t){return null!=t?t.toString():t}))}},e.prototype.getNode=function(){return this.dom.container},e.prototype.parseNumber=function(t){var i=this.s.dt.i18n("decimal");return i&&"."!==i&&(t=t.replace(/\./g,"").replace(i,".")),+t.replace(/(?!^-)[^0-9.]/g,"")},e.prototype.populate=function(){this._populateData(),-1!==this.s.dataIdx&&(this._populateCondition(),void 0!==this.s.condition&&this._populateValue())},e.prototype.rebuild=function(i){var e,n,s=!1;if(this._populateData(),void 0!==i.data){var r=this.classes.italic,o=this.dom.data;this.dom.data.children("option").each((function(){!s&&(t(this).text()===i.data||i.origData&&t(this).prop("origData")===i.origData)?(t(this).prop("selected",!0),o.removeClass(r),s=!0,e=parseInt(t(this).val(),10)):t(this).removeProp("selected")}))}if(s){this.s.data=i.data,this.s.origData=i.origData,this.s.dataIdx=e,this.c.orthogonal=this._getOptions().orthogonal,this.dom.dataTitle.remove(),this._populateCondition(),this.dom.conditionTitle.remove();var a=void 0,d=this.dom.condition.children("option");for(n=0;n<d.length;n++){var l=t(d[n]);void 0!==i.condition&&l.val()===i.condition&&"string"==typeof i.condition?(l.prop("selected",!0),a=l.val()):l.removeProp("selected")}if(this.s.condition=a,void 0!==this.s.condition){for(this.dom.conditionTitle.removeProp("selected"),this.dom.conditionTitle.remove(),this.dom.condition.removeClass(this.classes.italic),n=0;n<d.length;n++){var u=t(d[n]);u.val()!==this.s.condition&&u.removeProp("selected")}this._populateValue(i)}else this.dom.conditionTitle.prependTo(this.dom.condition).prop("selected",!0)}},e.prototype.setListeners=function(){var i=this;this.dom.data.unbind("change").on("change.dtsb",(function(){i.dom.dataTitle.removeProp("selected");for(var e=i.dom.data.children("option."+i.classes.option),n=0;n<e.length;n++){var s=t(e[n]);s.val()===i.dom.data.val()?(i.dom.data.removeClass(i.classes.italic),s.prop("selected",!0),i.s.dataIdx=+s.val(),i.s.data=s.text(),i.s.origData=s.prop("origData"),i.c.orthogonal=i._getOptions().orthogonal,i._clearCondition(),i._clearValue(),i._populateCondition(),i.s.filled&&(i.s.filled=!1,i.doSearch(),i.setListeners()),i.s.dt.state.save()):s.removeProp("selected")}})),this.dom.condition.unbind("change").on("change.dtsb",(function(){i.dom.conditionTitle.removeProp("selected");for(var e=i.dom.condition.children("option."+i.classes.option),n=0;n<e.length;n++){var s=t(e[n]);if(s.val()===i.dom.condition.val()){i.dom.condition.removeClass(i.classes.italic),s.prop("selected",!0);for(var r=s.val(),o=0,a=Object.keys(i.s.conditions);o<a.length;o++){if(a[o]===r){i.s.condition=r;break}}i._clearValue(),i._populateValue();for(var d=0,l=i.dom.value;d<l.length;d++){var u=l[d];i.s.filled&&void 0!==u&&0!==i.dom.inputCont.has(u[0]).length&&(i.s.filled=!1,i.doSearch(),i.setListeners())}(0===i.dom.value.length||1===i.dom.value.length&&void 0===i.dom.value[0])&&i.doSearch()}else s.removeProp("selected")}}))},e.prototype.setupButtons=function(){if(window.innerWidth>550)return this.dom.container.removeClass(this.classes.vertical),this.dom.buttons.css("left",null),void this.dom.buttons.css("top",null);this.dom.container.addClass(this.classes.vertical),this.dom.buttons.css("left",this.dom.data.innerWidth()),this.dom.buttons.css("top",this.dom.data.position().top)},e.prototype._buildCriteria=function(){this.dom.data.append(this.dom.dataTitle),this.dom.condition.append(this.dom.conditionTitle),this.dom.container.append(this.dom.data).append(this.dom.condition),this.dom.inputCont.empty();for(var t=0,i=this.dom.value;t<i.length;t++){var e=i[t];e.append(this.dom.valueTitle),this.dom.inputCont.append(e)}this.dom.buttons.append(this.dom.delete).append(this.dom.right),this.dom.container.append(this.dom.inputCont).append(this.dom.buttons),this.setListeners()},e.prototype._clearCondition=function(){this.dom.condition.empty(),this.dom.conditionTitle.prop("selected",!0).attr("disabled","true"),this.dom.condition.prepend(this.dom.conditionTitle).prop("selectedIndex",0),this.s.conditions={},this.s.condition=void 0},e.prototype._clearValue=function(){var i;if(void 0!==this.s.condition){if(this.dom.value.length>0&&void 0!==this.dom.value[0])for(var n=0,s=this.dom.value;n<s.length;n++)void 0!==(i=s[n])&&setTimeout((function(){i.remove()}),50);if(this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,e.updateListener)),this.dom.value.length>0&&void 0!==this.dom.value[0]){this.dom.inputCont.empty().append(this.dom.value[0]).insertAfter(this.dom.condition),t(this.dom.value[0]).trigger("dtsb-inserted");for(var r=1;r<this.dom.value.length;r++)this.dom.inputCont.append(this.dom.value[r]),t(this.dom.value[r]).trigger("dtsb-inserted")}}else{for(var o=0,a=this.dom.value;o<a.length;o++)void 0!==(i=a[o])&&setTimeout((function(){i.remove()}),50);this.dom.valueTitle.prop("selected",!0),this.dom.defaultValue.append(this.dom.valueTitle).insertAfter(this.dom.condition)}this.s.value=[],this.dom.value=[t("<select disabled/>").addClass(this.classes.value).addClass(this.classes.dropDown).addClass(this.classes.italic).addClass(this.classes.select).append(this.dom.valueTitle.clone())]},e.prototype._getOptions=function(){var i=this.s.dt;return t.extend(!0,{},e.defaults,i.settings()[0].aoColumns[this.s.dataIdx].searchBuilder)},e.prototype._populateCondition=function(){var n,s,r=[],o=Object.keys(this.s.conditions).length,a=this.s.dt,d=a.settings()[0].aoColumns,l=+this.dom.data.children("option:selected").val();if(0===o){if(this.s.type=a.column(l).type(),void 0!==d){var u=d[l];void 0!==u.searchBuilderType&&null!==u.searchBuilderType?this.s.type=u.searchBuilderType:void 0!==this.s.type&&null!==this.s.type||(this.s.type=u.sType)}null!==this.s.type&&void 0!==this.s.type||(t.fn.dataTable.ext.oApi&&t.fn.dataTable.ext.oApi._fnColumnTypes(a.settings()[0]),this.s.type=a.column(l).type()),this.dom.condition.removeAttr("disabled").empty().append(this.dom.conditionTitle).addClass(this.classes.italic),this.dom.conditionTitle.prop("selected",!0);var c=a.settings()[0].oLanguage.sDecimal;""!==c&&this.s.type&&this.s.type.indexOf(c)===this.s.type.length-c.length&&(this.s.type.includes("num-fmt")||this.s.type.includes("num"))&&(this.s.type=this.s.type.replace(c,""));var h=void 0;if(void 0!==this.c.conditions[this.s.type])h=this.c.conditions[this.s.type];else if(this.s.type&&"datetime"===this.s.type){var p=i.use("moment"),m=i.use("luxon");p&&(h=this.c.conditions.moment,this.s.dateFormat=p().creationData().locale._longDateFormat.L),m&&(h=this.c.conditions.luxon,this.s.dateFormat=m.DateTime.DATE_SHORT)}else this.s.type&&this.s.type.includes("datetime-")?(h=i.use("moment")?this.c.conditions.moment:this.c.conditions.luxon,this.s.dateFormat=this.s.type.replace(/datetime-/g,"")):this.s.type&&this.s.type.includes("moment")?(h=this.c.conditions.moment,this.s.dateFormat=this.s.type.replace(/moment-/g,"")):this.s.type&&this.s.type.includes("luxon")?(h=this.c.conditions.luxon,this.s.dateFormat=this.s.type.replace(/luxon-/g,"")):h=this.c.conditions.string;for(var f=0,v=Object.keys(h);f<v.length;f++)if(null!==h[n=v[f]]){if(a.page.info().serverSide&&h[n].init===e.initSelect){var g=d[l];this.s.serverData&&this.s.serverData[g.data]?(h[n].init=e.initSelectSSP,h[n].inputValue=e.inputValueSelect,h[n].isInputValid=e.isInputValidSelect):(h[n].init=e.initInput,h[n].inputValue=e.inputValueInput,h[n].isInputValid=e.isInputValidInput)}this.s.conditions[n]=h[n],"function"==typeof(s=h[n].conditionName)&&(s=s(a,this.c.i18n)),r.push(t("<option>",{text:s,value:n}).addClass(this.classes.option).addClass(this.classes.notItalic))}}else{if(!(o>0))return void this.dom.condition.attr("disabled","true").addClass(this.classes.italic);this.dom.condition.empty().removeAttr("disabled").addClass(this.classes.italic);for(var b=0,y=Object.keys(this.s.conditions);b<y.length;b++){n=y[b];var C=this.s.conditions[n].conditionName;"function"==typeof C&&(C=C(a,this.c.i18n));var V=t("<option>",{text:C,value:n}).addClass(this.classes.option).addClass(this.classes.notItalic);void 0!==this.s.condition&&this.s.condition===C&&(V.prop("selected",!0),this.dom.condition.removeClass(this.classes.italic)),r.push(V)}}for(var I=0,w=r;I<w.length;I++){var B=w[I];this.dom.condition.append(B)}if(d[l].searchBuilder&&d[l].searchBuilder.defaultCondition){var D=d[l].searchBuilder.defaultCondition;if("number"==typeof D)this.dom.condition.prop("selectedIndex",D),this.dom.condition.trigger("change");else if("string"==typeof D)for(var T=0;T<r.length;T++)for(var N=0,x=Object.keys(this.s.conditions);N<x.length;N++){var _=x[N];if(("string"==typeof(s=this.s.conditions[_].conditionName)?s:s(a,this.c.i18n))===r[T].text()&&_===D){this.dom.condition.prop("selectedIndex",this.dom.condition.children().toArray().indexOf(r[T][0])).removeClass(this.classes.italic),this.dom.condition.trigger("change"),T=r.length;break}}}else this.dom.condition.prop("selectedIndex",0)},e.prototype._populateData=function(){var i=this.s.dt.settings()[0].aoColumns,e=this.s.dt.columns(this.c.columns).indexes().toArray();this.dom.data.empty().append(this.dom.dataTitle);for(var n=0;n<i.length;n++)if(!0===this.c.columns||e.includes(n)){var s=i[n],r={index:n,origData:s.data,text:(s.searchBuilderTitle||s.sTitle).replace(/(<([^>]+)>)/gi,"")};this.dom.data.append(t("<option>",{text:r.text,value:r.index}).addClass(this.classes.option).addClass(this.classes.notItalic).prop("origData",s.data).prop("selected",this.s.dataIdx===r.index)),this.s.dataIdx===r.index&&this.dom.dataTitle.removeProp("selected")}},e.prototype._populateValue=function(i){var n,s=this,r=this.s.filled;this.s.filled=!1,setTimeout((function(){s.dom.defaultValue.remove()}),50);for(var o=function(t){setTimeout((function(){void 0!==t&&t.remove()}),50)},a=0,d=this.dom.value;a<d.length;a++){o(d[a])}var l=this.dom.inputCont.children();if(l.length>1)for(n=0;n<l.length;n++)t(l[n]).remove();for(void 0!==i&&this.s.dt.columns().every((function(t){s.s.dt.settings()[0].aoColumns[t].sTitle===i.data&&(s.s.dataIdx=t)})),this.dom.value=[].concat(this.s.conditions[this.s.condition].init(this,e.updateListener,void 0!==i?i.value:void 0)),void 0!==i&&void 0!==i.value&&(this.s.value=i.value),this.dom.inputCont.empty(),void 0!==this.dom.value[0]&&t(this.dom.value[0]).appendTo(this.dom.inputCont).trigger("dtsb-inserted"),n=1;n<this.dom.value.length;n++)t(this.dom.value[n]).insertAfter(this.dom.value[n-1]).trigger("dtsb-inserted");this.s.filled=this.s.conditions[this.s.condition].isInputValid(this.dom.value,this),this.setListeners(),this.s.preventRedraw||r===this.s.filled||(this.s.dt.page.info().serverSide||this.doSearch(),this.setListeners())},e.prototype._throttle=function(t,i){void 0===i&&(i=200);var e=null,n=null,s=this;return null===i&&(i=200),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=+new Date;null!==e&&a<e+i?clearTimeout(n):e=a,n=setTimeout((function(){e=null,t.apply(s,r)}),i)}},e.version="1.1.0",e.classes={button:"dtsb-button",buttonContainer:"dtsb-buttonContainer",condition:"dtsb-condition",container:"dtsb-criteria",data:"dtsb-data",delete:"dtsb-delete",dropDown:"dtsb-dropDown",greyscale:"dtsb-greyscale",input:"dtsb-input",inputCont:"dtsb-inputCont",italic:"dtsb-italic",joiner:"dtsb-joiner",left:"dtsb-left",notItalic:"dtsb-notItalic",option:"dtsb-option",right:"dtsb-right",select:"dtsb-select",value:"dtsb-value",vertical:"dtsb-vertical"},e.initSelect=function(i,n,s,r){void 0===s&&(s=null),void 0===r&&(r=!1);var o=i.dom.data.children("option:selected").val(),a=i.s.dt.rows().indexes().toArray(),d=i.s.dt.settings()[0].fastData;i.dom.valueTitle.prop("selected",!0);var l=t("<select/>").addClass(e.classes.value).addClass(e.classes.dropDown).addClass(e.classes.italic).addClass(e.classes.select).append(i.dom.valueTitle).on("change.dtsb",(function(){t(this).removeClass(e.classes.italic),n(i,this)}));i.c.greyscale&&l.addClass(e.classes.greyscale);for(var u=[],c=[],h=0,p=a;h<p.length;h++){var m=p[h],f=d(m,o,"string"==typeof i.c.orthogonal?i.c.orthogonal:i.c.orthogonal.search),v={filter:"string"==typeof f?f.replace(/[\r\n\u2028]/g," "):f,index:m,text:d(m,o,"string"==typeof i.c.orthogonal?i.c.orthogonal:i.c.orthogonal.display)};"array"===i.s.type&&(v.filter=Array.isArray(v.filter)?v.filter:[v.filter],v.text=Array.isArray(v.text)?v.text:[v.text]);var g=function(n,r){i.s.type.includes("html")&&null!==n&&"string"==typeof n&&n.replace(/(<([^>]+)>)/gi,"");var o=t("<option>",{type:Array.isArray(n)?"Array":"String",value:n}).data("sbv",n).addClass(i.classes.option).addClass(i.classes.notItalic).html("string"==typeof r?r.replace(/(<([^>]+)>)/gi,""):r),a=o.val();-1===u.indexOf(a)&&(u.push(a),c.push(o),null!==s&&Array.isArray(s[0])&&(s[0]=s[0].sort().join(",")),null!==s&&o.val()===s[0]&&(o.prop("selected",!0),l.removeClass(e.classes.italic),i.dom.valueTitle.removeProp("selected")))};if(r)for(var b=0;b<v.filter.length;b++)g(v.filter[b],v.text[b]);else g(v.filter,Array.isArray(v.text)?v.text.join(", "):v.text)}c.sort((function(t,e){return"array"===i.s.type||"string"===i.s.type||"html"===i.s.type?t.val()<e.val()?-1:t.val()>e.val()?1:0:"num"===i.s.type||"html-num"===i.s.type?+t.val().replace(/(<([^>]+)>)/gi,"")<+e.val().replace(/(<([^>]+)>)/gi,"")?-1:+t.val().replace(/(<([^>]+)>)/gi,"")>+e.val().replace(/(<([^>]+)>)/gi,"")?1:0:"num-fmt"===i.s.type||"html-num-fmt"===i.s.type?+t.val().replace(/[^0-9.]/g,"")<+e.val().replace(/[^0-9.]/g,"")?-1:+t.val().replace(/[^0-9.]/g,"")>+e.val().replace(/[^0-9.]/g,"")?1:0:void 0}));for(var y=0,C=c;y<C.length;y++){var V=C[y];l.append(V)}return l},e.initSelectSSP=function(i,n,s){void 0===s&&(s=null),i.dom.valueTitle.prop("selected",!0);var r=t("<select/>").addClass(e.classes.value).addClass(e.classes.dropDown).addClass(e.classes.italic).addClass(e.classes.select).append(i.dom.valueTitle).on("change.dtsb",(function(){t(this).removeClass(e.classes.italic),n(i,this)}));i.c.greyscale&&r.addClass(e.classes.greyscale);for(var o=[],a=0,d=i.s.serverData[i.s.origData];a<d.length;a++){var l=d[a];!function(n,a){i.s.type.includes("html")&&null!==n&&"string"==typeof n&&n.replace(/(<([^>]+)>)/gi,"");var d=t("<option>",{type:Array.isArray(n)?"Array":"String",value:n}).data("sbv",n).addClass(i.classes.option).addClass(i.classes.notItalic).html("string"==typeof a?a.replace(/(<([^>]+)>)/gi,""):a);o.push(d),null!==s&&d.val()===s[0]&&(d.prop("selected",!0),r.removeClass(e.classes.italic),i.dom.valueTitle.removeProp("selected"))}(l.value,l.label)}for(var u=0,c=o;u<c.length;u++){var h=c[u];r.append(h)}return r},e.initSelectArray=function(t,i,n){return void 0===n&&(n=null),e.initSelect(t,i,n,!0)},e.initInput=function(i,n,s){void 0===s&&(s=null);var r=i.s.dt.settings()[0].searchDelay,o=t("<input/>").addClass(e.classes.value).addClass(e.classes.input).on("input.dtsb keypress.dtsb",i._throttle((function(t){var e=t.keyCode||t.which;return n(i,this,e)}),null===r?100:r));return i.c.greyscale&&o.addClass(e.classes.greyscale),null!==s&&o.val(s[0]),i.s.dt.one("draw.dtsb",(function(){i.s.topGroup.trigger("dtsb-redrawLogic")})),o},e.init2Input=function(i,n,s){void 0===s&&(s=null);var r=i.s.dt.settings()[0].searchDelay,o=[t("<input/>").addClass(e.classes.value).addClass(e.classes.input).on("input.dtsb keypress.dtsb",i._throttle((function(t){var e=t.keyCode||t.which;return n(i,this,e)}),null===r?100:r)),t("<span>").addClass(i.classes.joiner).html(i.s.dt.i18n("searchBuilder.valueJoiner",i.c.i18n.valueJoiner)),t("<input/>").addClass(e.classes.value).addClass(e.classes.input).on("input.dtsb keypress.dtsb",i._throttle((function(t){var e=t.keyCode||t.which;return n(i,this,e)}),null===r?100:r))];return i.c.greyscale&&(o[0].addClass(e.classes.greyscale),o[2].addClass(e.classes.greyscale)),null!==s&&(o[0].val(s[0]),o[2].val(s[1])),i.s.dt.one("draw.dtsb",(function(){i.s.topGroup.trigger("dtsb-redrawLogic")})),o},e.initDate=function(i,n,s){void 0===s&&(s=null);var r=i.s.dt.settings()[0].searchDelay,o=i.s.dt.i18n("datetime",{}),a=t("<input/>").addClass(e.classes.value).addClass(e.classes.input).dtDateTime({attachTo:"input",format:i.s.dateFormat?i.s.dateFormat:void 0,i18n:o}).on("change.dtsb",i._throttle((function(){return n(i,this)}),null===r?100:r)).on("input.dtsb keypress.dtsb",(function(t){i._throttle((function(){var e=t.keyCode||t.which;return n(i,this,e)}),null===r?100:r)}));return i.c.greyscale&&a.addClass(e.classes.greyscale),null!==s&&a.val(s[0]),i.s.dt.one("draw.dtsb",(function(){i.s.topGroup.trigger("dtsb-redrawLogic")})),a},e.initNoValue=function(t){return t.s.dt.one("draw.dtsb",(function(){t.s.topGroup.trigger("dtsb-redrawLogic")})),[]},e.init2Date=function(n,s,r){var o=this;void 0===r&&(r=null);var a=n.s.dt.settings()[0].searchDelay,d=n.s.dt.i18n("datetime",{}),l=[t("<input/>").addClass(e.classes.value).addClass(e.classes.input).dtDateTime({attachTo:"input",format:n.s.dateFormat?n.s.dateFormat:void 0,i18n:d}).on("change.dtsb",null!==a?i.util.throttle((function(){return s(n,this)}),a):function(){s(n,o)}).on("input.dtsb keypress.dtsb",(function(t){i.util.throttle((function(){var i=t.keyCode||t.which;return s(n,this,i)}),null===a?0:a)})),t("<span>").addClass(n.classes.joiner).html(n.s.dt.i18n("searchBuilder.valueJoiner",n.c.i18n.valueJoiner)),t("<input/>").addClass(e.classes.value).addClass(e.classes.input).dtDateTime({attachTo:"input",format:n.s.dateFormat?n.s.dateFormat:void 0,i18n:d}).on("change.dtsb",null!==a?i.util.throttle((function(){return s(n,this)}),a):function(){s(n,o)}).on("input.dtsb keypress.dtsb",n.c.enterSearch||void 0!==n.s.dt.settings()[0].oInit.search&&n.s.dt.settings()[0].oInit.search.return||null===a?function(t){var i=t.keyCode||t.which;s(n,o,i)}:i.util.throttle((function(){return s(n,this)}),a))];return n.c.greyscale&&(l[0].addClass(e.classes.greyscale),l[2].addClass(e.classes.greyscale)),null!==r&&r.length>0&&(l[0].val(r[0]),l[2].val(r[1])),n.s.dt.one("draw.dtsb",(function(){n.s.topGroup.trigger("dtsb-redrawLogic")})),l},e.isInputValidSelect=function(t){for(var i=!0,n=0,s=t;n<s.length;n++){var r=s[n];r.children("option:selected").length===r.children("option").length-r.children("option."+e.classes.notItalic).length&&1===r.children("option:selected").length&&r.children("option:selected")[0]===r.children("option")[0]&&(i=!1)}return i},e.isInputValidInput=function(t){for(var i=!0,e=0,n=t;e<n.length;e++){var s=n[e];s.is("input")&&0===s.val().length&&(i=!1)}return i},e.inputValueSelect=function(t){for(var i=[],n=0,s=t;n<s.length;n++){var r=s[n];r.is("select")&&i.push(e._escapeHTML(r.children("option:selected").data("sbv")))}return i},e.inputValueInput=function(t){for(var i=[],s=0,r=t;s<r.length;s++){var o=r[s];o.is("input")&&i.push(e._escapeHTML(o.val()))}return i.map(n.util.diacritics)},e.updateListener=function(t,i,e){var n,s=t.s.conditions[t.s.condition];if(t.s.filled=s.isInputValid(t.dom.value,t),t.s.value=s.inputValue(t.dom.value,t),t.s.filled){for(Array.isArray(t.s.value)||(t.s.value=[t.s.value]),n=0;n<t.s.value.length;n++)Array.isArray(t.s.value[n])&&t.s.value[n].sort();var r=null,o=null;for(n=0;n<t.dom.value.length;n++)i===t.dom.value[n][0]&&(r=n,void 0!==i.selectionStart&&(o=i.selectionStart));(t.c.enterSearch||void 0!==t.s.dt.settings()[0].oInit.search&&t.s.dt.settings()[0].oInit.search.return)&&13!==e||t.doSearch(),null!==r&&(t.dom.value[r].removeClass(t.classes.italic),t.dom.value[r].focus(),null!==o&&t.dom.value[r][0].setSelectionRange(o,o))}else(t.c.enterSearch||void 0!==t.s.dt.settings()[0].oInit.search&&t.s.dt.settings()[0].oInit.search.return)&&13!==e||t.doSearch()},e.dateConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.equals",i.conditions.date.equals)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))===i[0]}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.not",i.conditions.date.not)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))!==i[0]}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.before",i.conditions.date.before)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))<i[0]}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.after",i.conditions.date.after)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return(t=t.replace(/(\/|-|,)/g,"-"))>i[0]}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.between",i.conditions.date.between)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t=t.replace(/(\/|-|,)/g,"-"),i[0]<i[1]?i[0]<=t&&t<=i[1]:i[1]<=t&&t<=i[0]}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notBetween",i.conditions.date.notBetween)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t=t.replace(/(\/|-|,)/g,"-"),i[0]<i[1]?!(i[0]<=t&&t<=i[1]):!(i[1]<=t&&t<=i[0])}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.empty",i.conditions.date.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notEmpty",i.conditions.date.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.momentDateConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.equals",i.conditions.date.equals)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return s()(t,e.s.dateFormat).valueOf()===s()(i[0],e.s.dateFormat).valueOf()}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.not",i.conditions.date.not)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return s()(t,e.s.dateFormat).valueOf()!==s()(i[0],e.s.dateFormat).valueOf()}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.before",i.conditions.date.before)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return s()(t,e.s.dateFormat).valueOf()<s()(i[0],e.s.dateFormat).valueOf()}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.after",i.conditions.date.after)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return s()(t,e.s.dateFormat).valueOf()>s()(i[0],e.s.dateFormat).valueOf()}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.between",i.conditions.date.between)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){var n=s()(t,e.s.dateFormat).valueOf(),r=s()(i[0],e.s.dateFormat).valueOf(),o=s()(i[1],e.s.dateFormat).valueOf();return r<o?r<=n&&n<=o:o<=n&&n<=r}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notBetween",i.conditions.date.notBetween)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){var n=s()(t,e.s.dateFormat).valueOf(),r=s()(i[0],e.s.dateFormat).valueOf(),o=s()(i[1],e.s.dateFormat).valueOf();return r<o?!(+r<=+n&&+n<=+o):!(+o<=+n&&+n<=+r)}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.empty",i.conditions.date.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notEmpty",i.conditions.date.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.luxonDateConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.equals",i.conditions.date.equals)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return r().DateTime.fromFormat(t,e.s.dateFormat).ts===r().DateTime.fromFormat(i[0],e.s.dateFormat).ts}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.not",i.conditions.date.not)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return r().DateTime.fromFormat(t,e.s.dateFormat).ts!==r().DateTime.fromFormat(i[0],e.s.dateFormat).ts}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.before",i.conditions.date.before)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return r().DateTime.fromFormat(t,e.s.dateFormat).ts<r().DateTime.fromFormat(i[0],e.s.dateFormat).ts}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.after",i.conditions.date.after)},init:e.initDate,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return r().DateTime.fromFormat(t,e.s.dateFormat).ts>r().DateTime.fromFormat(i[0],e.s.dateFormat).ts}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.between",i.conditions.date.between)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){var n=r().DateTime.fromFormat(t,e.s.dateFormat).ts,s=r().DateTime.fromFormat(i[0],e.s.dateFormat).ts,o=r().DateTime.fromFormat(i[1],e.s.dateFormat).ts;return s<o?s<=n&&n<=o:o<=n&&n<=s}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notBetween",i.conditions.date.notBetween)},init:e.init2Date,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){var n=r().DateTime.fromFormat(t,e.s.dateFormat).ts,s=r().DateTime.fromFormat(i[0],e.s.dateFormat).ts,o=r().DateTime.fromFormat(i[1],e.s.dateFormat).ts;return s<o?!(+s<=+n&&+n<=+o):!(+o<=+n&&+n<=+s)}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.empty",i.conditions.date.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.date.notEmpty",i.conditions.date.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.numConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.equals",i.conditions.number.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return+t==+i[0]}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.not",i.conditions.number.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return+t!=+i[0]}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lt",i.conditions.number.lt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t<+i[0]}},"<=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lte",i.conditions.number.lte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t<=+i[0]}},">=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gte",i.conditions.number.gte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t>=+i[0]}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gt",i.conditions.number.gt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+t>+i[0]}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.between",i.conditions.number.between)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+i[0]<+i[1]?+i[0]<=+t&&+t<=+i[1]:+i[1]<=+t&&+t<=+i[0]}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notBetween",i.conditions.number.notBetween)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return+i[0]<+i[1]?!(+i[0]<=+t&&+t<=+i[1]):!(+i[1]<=+t&&+t<=+i[0])}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.empty",i.conditions.number.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notEmpty",i.conditions.number.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.numFmtConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.equals",i.conditions.number.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i,e){return e.parseNumber(t)===e.parseNumber(i[0])}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.not",i.conditions.number.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i,e){return e.parseNumber(t)!==e.parseNumber(i[0])}},"<":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lt",i.conditions.number.lt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return e.parseNumber(t)<e.parseNumber(i[0])}},"<=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.lte",i.conditions.number.lte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return e.parseNumber(t)<=e.parseNumber(i[0])}},">=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gte",i.conditions.number.gte)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return e.parseNumber(t)>=e.parseNumber(i[0])}},">":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.gt",i.conditions.number.gt)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){return e.parseNumber(t)>e.parseNumber(i[0])}},between:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.between",i.conditions.number.between)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){var n=e.parseNumber(t),s=e.parseNumber(i[0]),r=e.parseNumber(i[1]);return+s<+r?+s<=+n&&+n<=+r:+r<=+n&&+n<=+s}},"!between":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notBetween",i.conditions.number.notBetween)},init:e.init2Input,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i,e){var n=e.parseNumber(t),s=e.parseNumber(i[0]),r=e.parseNumber(i[1]);return+s<+r?!(+s<=+n&&+n<=+r):!(+r<=+n&&+n<=+s)}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.empty",i.conditions.number.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.number.notEmpty",i.conditions.number.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.stringConditions={"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.equals",i.conditions.string.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return t===i[0]}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.not",i.conditions.string.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidInput,search:function(t,i){return t!==i[0]}},starts:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.startsWith",i.conditions.string.startsWith)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return 0===t.toLowerCase().indexOf(i[0].toLowerCase())}},"!starts":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.notStartsWith",i.conditions.string.notStartsWith)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return 0!==t.toLowerCase().indexOf(i[0].toLowerCase())}},contains:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.contains",i.conditions.string.contains)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t.toLowerCase().includes(i[0].toLowerCase())}},"!contains":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.notContains",i.conditions.string.notContains)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return!t.toLowerCase().includes(i[0].toLowerCase())}},ends:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.endsWith",i.conditions.string.endsWith)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return t.toLowerCase().endsWith(i[0].toLowerCase())}},"!ends":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.notEndsWith",i.conditions.string.notEndsWith)},init:e.initInput,inputValue:e.inputValueInput,isInputValid:e.isInputValidInput,search:function(t,i){return!t.toLowerCase().endsWith(i[0].toLowerCase())}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.empty",i.conditions.string.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.string.notEmpty",i.conditions.string.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return!(null==t||0===t.length)}}},e.arrayConditions={contains:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.contains",i.conditions.array.contains)},init:e.initSelectArray,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return t.includes(i[0])}},without:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.without",i.conditions.array.without)},init:e.initSelectArray,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){return-1===t.indexOf(i[0])}},"=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.equals",i.conditions.array.equals)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){if(t.length===i.length){for(var e=0;e<t.length;e++)if(t[e]!==i[e])return!1;return!0}return!1}},"!=":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.not",i.conditions.array.not)},init:e.initSelect,inputValue:e.inputValueSelect,isInputValid:e.isInputValidSelect,search:function(t,i){if(t.length===i.length){for(var e=0;e<t.length;e++)if(t[e]!==i[e])return!0;return!1}return!0}},null:{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.empty",i.conditions.array.empty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null==t||0===t.length}},"!null":{conditionName:function(t,i){return t.i18n("searchBuilder.conditions.array.notEmpty",i.conditions.array.notEmpty)},init:e.initNoValue,inputValue:function(){},isInputValid:function(){return!0},search:function(t){return null!=t&&0!==t.length}}},e.defaults={columns:!0,conditions:{array:e.arrayConditions,date:e.dateConditions,html:e.stringConditions,"html-num":e.numConditions,"html-num-fmt":e.numFmtConditions,luxon:e.luxonDateConditions,moment:e.momentDateConditions,num:e.numConditions,"num-fmt":e.numFmtConditions,string:e.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:void 0,greyscale:!1,i18n:{add:"Add Condition",button:{0:"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",data:"Data",delete:"&times",deleteTitle:"Delete filtering rule",left:"<",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",right:">",rightTitle:"Indent criteria",search:"Search",title:{0:"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},liveSearch:!0,logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1},e}();var d,l,u=function(){function t(i,e,n,s,r,a,d){return void 0===s&&(s=0),void 0===r&&(r=!1),void 0===a&&(a=1),void 0===d&&(d=void 0),this.classes=o.extend(!0,{},t.classes),this.c=o.extend(!0,{},t.defaults,e),this.s={criteria:[],depth:a,dt:i,index:s,isChild:r,logic:void 0,opts:e,preventRedraw:!1,serverData:d,toDrop:void 0,topGroup:n},this.dom={add:o("<button/>").addClass(this.classes.add).addClass(this.classes.button).attr("type","button"),clear:o("<button>&times</button>").addClass(this.classes.button).addClass(this.classes.clearGroup).attr("type","button"),container:o("<div/>").addClass(this.classes.group),logic:o("<button><div/></button>").addClass(this.classes.logic).addClass(this.classes.button).attr("type","button"),logicContainer:o("<div/>").addClass(this.classes.logicContainer),search:o("<button/>").addClass(this.classes.search).addClass(this.classes.button).attr("type","button").css("display","none")},void 0===this.s.topGroup&&(this.s.topGroup=this.dom.container),this._setup(),this}return t.prototype.destroy=function(){this.dom.add.off(".dtsb"),this.dom.logic.off(".dtsb"),this.dom.search.off(".dtsb"),this.dom.container.trigger("dtsb-destroy").remove(),this.s.criteria=[]},t.prototype.getDetails=function(t){if(void 0===t&&(t=!1),0===this.s.criteria.length)return{};for(var i={criteria:[],logic:this.s.logic},e=0,n=this.s.criteria;e<n.length;e++){var s=n[e];i.criteria.push(s.criteria.getDetails(t))}return i},t.prototype.getNode=function(){return this.dom.container},t.prototype.rebuild=function(t){var i;if(!(void 0===t.criteria||null===t.criteria||Array.isArray(t.criteria)&&0===t.criteria.length)){if(this.s.logic=t.logic,this.dom.logic.children().first().html("OR"===this.s.logic?this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr):this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd)),Array.isArray(t.criteria))for(var e=0,n=t.criteria;e<n.length;e++)void 0!==(i=n[e]).logic?this._addPrevGroup(i):void 0===i.logic&&this._addPrevCriteria(i);for(var s=0,r=this.s.criteria;s<r.length;s++)(i=r[s]).criteria instanceof a&&(i.criteria.updateArrows(this.s.criteria.length>1),this._setCriteriaListeners(i.criteria))}},t.prototype.redrawContents=function(){if(!this.s.preventRedraw){this.dom.container.children().detach(),this.dom.container.append(this.dom.logicContainer).append(this.dom.add),this.c.liveSearch||this.dom.container.append(this.dom.search),this.s.criteria.sort((function(t,i){return t.criteria.s.index<i.criteria.s.index?-1:t.criteria.s.index>i.criteria.s.index?1:0})),this.setListeners();for(var i=0;i<this.s.criteria.length;i++){var e=this.s.criteria[i].criteria;e instanceof a?(this.s.criteria[i].index=i,this.s.criteria[i].criteria.s.index=i,this.s.criteria[i].criteria.dom.container.insertBefore(this.dom.add),this._setCriteriaListeners(e),this.s.criteria[i].criteria.s.preventRedraw=this.s.preventRedraw,this.s.criteria[i].criteria.rebuild(this.s.criteria[i].criteria.getDetails()),this.s.criteria[i].criteria.s.preventRedraw=!1):e instanceof t&&e.s.criteria.length>0?(this.s.criteria[i].index=i,this.s.criteria[i].criteria.s.index=i,this.s.criteria[i].criteria.dom.container.insertBefore(this.dom.add),e.s.preventRedraw=this.s.preventRedraw,e.redrawContents(),e.s.preventRedraw=!1,this._setGroupListeners(e)):(this.s.criteria.splice(i,1),i--)}this.setupLogic()}},t.prototype.redrawLogic=function(){for(var i=0,e=this.s.criteria;i<e.length;i++){var n=e[i];n.criteria instanceof t&&n.criteria.redrawLogic()}this.setupLogic()},t.prototype.search=function(t,i){return"AND"===this.s.logic?this._andSearch(t,i):"OR"!==this.s.logic||this._orSearch(t,i)},t.prototype.setupLogic=function(){if(this.dom.logicContainer.remove(),this.dom.clear.remove(),this.s.criteria.length<1)return this.s.isChild||(this.dom.container.trigger("dtsb-destroy"),this.dom.container.css("margin-left",0)),void this.dom.search.css("display","none");this.dom.clear.height("0px"),this.dom.logicContainer.append(this.dom.clear),this.s.isChild||this.dom.search.css("display","inline-block"),this.dom.container.prepend(this.dom.logicContainer);for(var t=0,i=this.s.criteria;t<i.length;t++){var e=i[t];e.criteria instanceof a&&e.criteria.setupButtons()}var n=this.dom.container.outerHeight()-1;this.dom.logicContainer.width(n),this._setLogicListener(),this.dom.container.css("margin-left",this.dom.logicContainer.outerHeight(!0));var s=this.dom.logicContainer.offset(),r=s.left,d=r-(r-this.dom.container.offset().left)-this.dom.logicContainer.outerHeight(!0);this.dom.logicContainer.offset({left:d});var l=this.dom.logicContainer.next(),u=s.top,c=u-(u-o(l).offset().top);this.dom.logicContainer.offset({top:c}),this.dom.clear.outerHeight(this.dom.logicContainer.height()),this._setClearListener()},t.prototype.setListeners=function(){var t=this;this.dom.add.unbind("click"),this.dom.add.on("click.dtsb",(function(){return t.s.isChild||t.dom.container.prepend(t.dom.logicContainer),t.addCriteria(),t.dom.container.trigger("dtsb-add"),t.s.dt.state.save(),!1})),this.dom.search.off("click.dtsb").on("click.dtsb",(function(){t.s.dt.draw()}));for(var i=0,e=this.s.criteria;i<e.length;i++){e[i].criteria.setListeners()}this._setClearListener(),this._setLogicListener()},t.prototype.addCriteria=function(t){void 0===t&&(t=null);var i=null===t?this.s.criteria.length:t.s.index,e=new a(this.s.dt,this.s.opts,this.s.topGroup,i,this.s.depth,this.s.serverData,this.c.liveSearch);null!==t&&(e.c=t.c,e.s=t.s,e.s.depth=this.s.depth,e.classes=t.classes),e.populate();for(var n=!1,s=0;s<this.s.criteria.length;s++)0===s&&this.s.criteria[s].criteria.s.index>e.s.index?(e.getNode().insertBefore(this.s.criteria[s].criteria.dom.container),n=!0):s<this.s.criteria.length-1&&this.s.criteria[s].criteria.s.index<e.s.index&&this.s.criteria[s+1].criteria.s.index>e.s.index&&(e.getNode().insertAfter(this.s.criteria[s].criteria.dom.container),n=!0);n||e.getNode().insertBefore(this.dom.add),this.s.criteria.push({criteria:e,index:i}),this.s.criteria=this.s.criteria.sort((function(t,i){return t.criteria.s.index-i.criteria.s.index}));for(var r=0,o=this.s.criteria;r<o.length;r++){var d=o[r];d.criteria instanceof a&&d.criteria.updateArrows(this.s.criteria.length>1)}this._setCriteriaListeners(e),e.setListeners(),this.setupLogic()},t.prototype.checkFilled=function(){for(var i=0,e=this.s.criteria;i<e.length;i++){var n=e[i];if(n.criteria instanceof a&&n.criteria.s.filled||n.criteria instanceof t&&n.criteria.checkFilled())return!0}return!1},t.prototype.count=function(){for(var i=0,e=0,n=this.s.criteria;e<n.length;e++){var s=n[e];s.criteria instanceof t?i+=s.criteria.count():i++}return i},t.prototype._addPrevGroup=function(i){var e=this.s.criteria.length,n=new t(this.s.dt,this.c,this.s.topGroup,e,!0,this.s.depth+1,this.s.serverData);this.s.criteria.push({criteria:n,index:e,logic:n.s.logic}),n.rebuild(i),this.s.criteria[e].criteria=n,this.s.topGroup.trigger("dtsb-redrawContents"),this._setGroupListeners(n)},t.prototype._addPrevCriteria=function(t){var i=this.s.criteria.length,e=new a(this.s.dt,this.s.opts,this.s.topGroup,i,this.s.depth,this.s.serverData);e.populate(),this.s.criteria.push({criteria:e,index:i}),e.s.preventRedraw=this.s.preventRedraw,e.rebuild(t),e.s.preventRedraw=!1,this.s.criteria[i].criteria=e,this.s.preventRedraw||this.s.topGroup.trigger("dtsb-redrawContents")},t.prototype._andSearch=function(t,i){if(0===this.s.criteria.length)return!0;for(var e=0,n=this.s.criteria;e<n.length;e++){var s=n[e];if((!(s.criteria instanceof a)||s.criteria.s.filled)&&!s.criteria.search(t,i))return!1}return!0},t.prototype._orSearch=function(i,e){if(0===this.s.criteria.length)return!0;for(var n=!1,s=0,r=this.s.criteria;s<r.length;s++){var o=r[s];if(o.criteria instanceof a&&o.criteria.s.filled){if(n=!0,o.criteria.search(i,e))return!0}else if(o.criteria instanceof t&&o.criteria.checkFilled()&&(n=!0,o.criteria.search(i,e)))return!0}return!n},t.prototype._removeCriteria=function(i,e){var n;if(void 0===e&&(e=!1),this.s.criteria.length<=1&&this.s.isChild)this.destroy();else{var s=void 0;for(n=0;n<this.s.criteria.length;n++)this.s.criteria[n].index===i.s.index&&(!e||this.s.criteria[n].criteria instanceof t)&&(s=n);for(void 0!==s&&this.s.criteria.splice(s,1),n=0;n<this.s.criteria.length;n++)this.s.criteria[n].index=n,this.s.criteria[n].criteria.s.index=n}},t.prototype._setCriteriaListeners=function(i){var e=this;i.dom.delete.unbind("click").on("click.dtsb",(function(){e._removeCriteria(i),i.dom.container.remove();for(var t=0,n=e.s.criteria;t<n.length;t++){var s=n[t];s.criteria instanceof a&&s.criteria.updateArrows(e.s.criteria.length>1)}return i.destroy(),e.s.dt.draw(),e.s.topGroup.trigger("dtsb-redrawContents"),!1})),i.dom.right.unbind("click").on("click.dtsb",(function(){var n=i.s.index,s=new t(e.s.dt,e.s.opts,e.s.topGroup,i.s.index,!0,e.s.depth+1,e.s.serverData);return s.addCriteria(i),e.s.criteria[n].criteria=s,e.s.criteria[n].logic="AND",e.s.topGroup.trigger("dtsb-redrawContents"),e._setGroupListeners(s),!1})),i.dom.left.unbind("click").on("click.dtsb",(function(){e.s.toDrop=new a(e.s.dt,e.s.opts,e.s.topGroup,i.s.index,void 0,e.s.serverData),e.s.toDrop.s=i.s,e.s.toDrop.c=i.c,e.s.toDrop.classes=i.classes,e.s.toDrop.populate();var t=e.s.toDrop.s.index;return e.dom.container.trigger("dtsb-dropCriteria"),i.s.index=t,e._removeCriteria(i),e.s.topGroup.trigger("dtsb-redrawContents"),e.s.dt.draw(),!1}))},t.prototype._setClearListener=function(){var t=this;this.dom.clear.unbind("click").on("click.dtsb",(function(){return t.s.isChild?(t.destroy(),t.s.topGroup.trigger("dtsb-redrawContents"),!1):(t.dom.container.trigger("dtsb-clearContents"),!1)}))},t.prototype._setGroupListeners=function(t){var i=this;t.dom.add.unbind("click").on("click.dtsb",(function(){return i.setupLogic(),i.dom.container.trigger("dtsb-add"),!1})),t.dom.container.unbind("dtsb-add").on("dtsb-add.dtsb",(function(){return i.setupLogic(),i.dom.container.trigger("dtsb-add"),!1})),t.dom.container.unbind("dtsb-destroy").on("dtsb-destroy.dtsb",(function(){return i._removeCriteria(t,!0),t.dom.container.remove(),i.setupLogic(),!1})),t.dom.container.unbind("dtsb-dropCriteria").on("dtsb-dropCriteria.dtsb",(function(){var e=t.s.toDrop;return e.s.index=t.s.index,e.updateArrows(i.s.criteria.length>1),i.addCriteria(e),!1})),t.setListeners()},t.prototype._setup=function(){this.setListeners(),this.dom.add.html(this.s.dt.i18n("searchBuilder.add",this.c.i18n.add)),this.dom.search.html(this.s.dt.i18n("searchBuilder.search",this.c.i18n.search)),this.dom.logic.children().first().html("OR"===this.c.logic?this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr):this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd)),this.s.logic="OR"===this.c.logic?"OR":"AND",this.c.greyscale&&this.dom.logic.addClass(this.classes.greyscale),this.dom.logicContainer.append(this.dom.logic).append(this.dom.clear),this.s.isChild&&this.dom.container.append(this.dom.logicContainer),this.dom.container.append(this.dom.add),this.c.liveSearch||this.dom.container.append(this.dom.search)},t.prototype._setLogicListener=function(){var t=this;this.dom.logic.unbind("click").on("click.dtsb",(function(){t._toggleLogic(),t.s.dt.draw();for(var i=0,e=t.s.criteria;i<e.length;i++){e[i].criteria.setListeners()}}))},t.prototype._toggleLogic=function(){"OR"===this.s.logic?(this.s.logic="AND",this.dom.logic.children().first().html(this.s.dt.i18n("searchBuilder.logicAnd",this.c.i18n.logicAnd))):"AND"===this.s.logic&&(this.s.logic="OR",this.dom.logic.children().first().html(this.s.dt.i18n("searchBuilder.logicOr",this.c.i18n.logicOr)))},t.version="1.1.0",t.classes={add:"dtsb-add",button:"dtsb-button",clearGroup:"dtsb-clearGroup",greyscale:"dtsb-greyscale",group:"dtsb-group",inputButton:"dtsb-iptbtn",logic:"dtsb-logic",logicContainer:"dtsb-logicContainer",search:"dtsb-search"},t.defaults={columns:!0,conditions:{date:a.dateConditions,html:a.stringConditions,"html-num":a.numConditions,"html-num-fmt":a.numFmtConditions,luxon:a.luxonDateConditions,moment:a.momentDateConditions,num:a.numConditions,"num-fmt":a.numFmtConditions,string:a.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:void 0,greyscale:!1,liveSearch:!0,i18n:{add:"Add Condition",button:{0:"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",data:"Data",delete:"&times",deleteTitle:"Delete filtering rule",left:"<",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",right:">",rightTitle:"Indent criteria",search:"Search",title:{0:"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1},t}();var c,h=function(){function t(i,e){var n=this;if(!l||!l.versionCheck||!l.versionCheck("2"))throw new Error("SearchBuilder requires DataTables 2 or newer");var s=new l.Api(i);if(this.classes=d.extend(!0,{},t.classes),this.c=d.extend(!0,{},t.defaults,e),this.dom={clearAll:d('<button type="button">'+s.i18n("searchBuilder.clearAll",this.c.i18n.clearAll)+"</button>").addClass(this.classes.clearAll).addClass(this.classes.button).attr("type","button"),container:d("<div/>").addClass(this.classes.container),title:d("<div/>").addClass(this.classes.title),titleRow:d("<div/>").addClass(this.classes.titleRow),topGroup:void 0},this.s={dt:s,opts:e,search:void 0,serverData:void 0,topGroup:void 0},void 0===s.settings()[0]._searchBuilder)return s.settings()[0]._searchBuilder=this,this.s.dt.page.info().serverSide&&(this.s.dt.on("preXhr.dtsb",(function(t,i,e){var s=n.s.dt.state.loaded();s&&s.searchBuilder&&(e.searchBuilder=n._collapseArray(s.searchBuilder))})),this.s.dt.on("xhr.dtsb",(function(t,i,e){e&&e.searchBuilder&&e.searchBuilder.options&&(n.s.serverData=e.searchBuilder.options)}))),this.s.dt.settings()[0]._bInitComplete?this._setUp():s.one("init.dt",(function(){n._setUp()})),this}return t.prototype.getDetails=function(t){return void 0===t&&(t=!1),this.s.topGroup?this.s.topGroup.getDetails(t):{}},t.prototype.getNode=function(){return this.dom.container},t.prototype.rebuild=function(t,i){return void 0===i&&(i=!0),this.dom.clearAll.click(),null==t||(this.s.topGroup.s.preventRedraw=!0,this.s.topGroup.rebuild(t),this.s.topGroup.s.preventRedraw=!1,this._checkClear(),this._updateTitle(this.s.topGroup.count()),this.s.topGroup.redrawContents(),i&&this.s.dt.draw(!1),this.s.topGroup.setListeners()),this},t.prototype._applyPreDefDefaults=function(t){var i=this;void 0!==t.criteria&&void 0===t.logic&&(t.logic="AND");for(var e=function(t){void 0!==t.criteria?t=n._applyPreDefDefaults(t):n.s.dt.columns().every((function(e){i.s.dt.settings()[0].aoColumns[e].sTitle===t.data&&(t.dataIdx=e)}))},n=this,s=0,r=t.criteria;s<r.length;s++){e(r[s])}return t},t.prototype._setUp=function(t){var e=this;if(void 0===t&&(t=!0),"function"!=typeof this.s.dt.column().type&&i.Api.registerPlural("columns().types()","column().type()",(function(){return this.iterator("column",(function(t,i){return t.aoColumns[i].sType}),1)})),!l.DateTime){var n=this.s.dt.columns().types().toArray();if(void 0===n||n.includes(void 0)||n.includes(null)){n=[];for(var s=0,r=this.s.dt.settings()[0].aoColumns;s<r.length;s++){var o=r[s];n.push(void 0!==o.searchBuilderType?o.searchBuilderType:o.sType)}}var a=this.s.dt.columns().toArray();(void 0===n||n.includes(void 0)||n.includes(null))&&(d.fn.dataTable.ext.oApi&&d.fn.dataTable.ext.oApi._fnColumnTypes(this.s.dt.settings()[0]),n=this.s.dt.columns().types().toArray());for(var c=0;c<a[0].length;c++){var h=n[a[0][c]];if((!0===this.c.columns||Array.isArray(this.c.columns)&&this.c.columns.includes(c))&&(h.includes("date")||h.includes("moment")||h.includes("luxon")))throw alert("SearchBuilder Requires DateTime when used with dates."),new Error("SearchBuilder requires DateTime")}}if(this.s.topGroup=new u(this.s.dt,this.c,void 0,void 0,void 0,void 0,this.s.serverData),this._setClearListener(),this.s.dt.on("stateSaveParams.dtsb",(function(t,i,n){n.searchBuilder=e.getDetails(),n.scroller?n.start=e.s.dt.state().start:n.page=e.s.dt.page()})),this.s.dt.on("stateLoadParams.dtsb",(function(t,i,n){e.rebuild(n.searchBuilder)})),this._build(),this.s.dt.on("preXhr.dtsb",(function(t,i,n){e.s.dt.page.info().serverSide&&(n.searchBuilder=e._collapseArray(e.getDetails(!0)))})),this.s.dt.on("columns-reordered",(function(){e.rebuild(e.getDetails())})),t){var p=this.s.dt.state.loaded();null!==p&&void 0!==p.searchBuilder?(this.s.topGroup.rebuild(p.searchBuilder),this.s.topGroup.dom.container.trigger("dtsb-redrawContents"),this.s.dt.page.info().serverSide||(p.page?this.s.dt.page(p.page).draw("page"):this.s.dt.scroller&&p.scroller&&this.s.dt.scroller().scrollToRow(p.scroller.topRow)),this.s.topGroup.setListeners()):!1!==this.c.preDefined&&(this.c.preDefined=this._applyPreDefDefaults(this.c.preDefined),this.rebuild(this.c.preDefined))}this._setEmptyListener(),this.s.dt.state.save()},t.prototype._collapseArray=function(t){if(void 0===t.logic)void 0!==t.value&&(t.value.sort((function(t,i){return isNaN(+t)||(t=+t,i=+i),t<i?-1:i<t?1:0})),t.value1=t.value[0],t.value2=t.value[1]);else for(var i=0;i<t.criteria.length;i++)t.criteria[i]=this._collapseArray(t.criteria[i]);return t},t.prototype._updateTitle=function(t){this.dom.title.html(this.s.dt.i18n("searchBuilder.title",this.c.i18n.title,t))},t.prototype._build=function(){var t=this;this.dom.clearAll.remove(),this.dom.container.empty();var i=this.s.topGroup.count();this._updateTitle(i),this.dom.titleRow.append(this.dom.title),this.dom.container.append(this.dom.titleRow),this.dom.topGroup=this.s.topGroup.getNode(),this.dom.container.append(this.dom.topGroup),this._setRedrawListener();var e=this.s.dt.table(0).node();d.fn.dataTable.ext.search.includes(this.s.search)||(this.s.search=function(i,n,s){return i.nTable!==e||t.s.topGroup.search(n,s)},d.fn.dataTable.ext.search.push(this.s.search)),this.s.dt.on("destroy.dtsb",(function(){t.dom.container.remove(),t.dom.clearAll.remove();for(var i=d.fn.dataTable.ext.search.indexOf(t.s.search);-1!==i;)d.fn.dataTable.ext.search.splice(i,1),i=d.fn.dataTable.ext.search.indexOf(t.s.search);t.s.dt.off(".dtsb"),d(t.s.dt.table().node()).off(".dtsb")}))},t.prototype._checkClear=function(){this.s.topGroup.s.criteria.length>0?(this.dom.clearAll.insertAfter(this.dom.title),this._setClearListener()):this.dom.clearAll.remove()},t.prototype._filterChanged=function(t){var i=this.c.filterChanged;"function"==typeof i&&i(t,this.s.dt.i18n("searchBuilder.button",this.c.i18n.button,t))},t.prototype._setClearListener=function(){var t=this;this.dom.clearAll.unbind("click"),this.dom.clearAll.on("click.dtsb",(function(){return t.s.topGroup=new u(t.s.dt,t.c,void 0,void 0,void 0,void 0,t.s.serverData),t._build(),t.s.dt.draw(),t.s.topGroup.setListeners(),t.dom.clearAll.remove(),t._setEmptyListener(),t._filterChanged(0),!1}))},t.prototype._setRedrawListener=function(){var t=this;this.s.topGroup.dom.container.unbind("dtsb-redrawContents"),this.s.topGroup.dom.container.on("dtsb-redrawContents.dtsb",(function(){t._checkClear(),t.s.topGroup.redrawContents(),t.s.topGroup.setupLogic(),t._setEmptyListener();var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i),t.s.dt.page.info().serverSide||t.s.dt.draw(),t.s.dt.state.save()})),this.s.topGroup.dom.container.unbind("dtsb-redrawContents-noDraw"),this.s.topGroup.dom.container.on("dtsb-redrawContents-noDraw.dtsb",(function(){t._checkClear(),t.s.topGroup.s.preventRedraw=!0,t.s.topGroup.redrawContents(),t.s.topGroup.s.preventRedraw=!1,t.s.topGroup.setupLogic(),t._setEmptyListener();var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i)})),this.s.topGroup.dom.container.unbind("dtsb-redrawLogic"),this.s.topGroup.dom.container.on("dtsb-redrawLogic.dtsb",(function(){t.s.topGroup.redrawLogic();var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i)})),this.s.topGroup.dom.container.unbind("dtsb-add"),this.s.topGroup.dom.container.on("dtsb-add.dtsb",(function(){var i=t.s.topGroup.count();t._updateTitle(i),t._filterChanged(i),t._checkClear()})),this.s.dt.on("postEdit.dtsb postCreate.dtsb postRemove.dtsb",(function(){t.s.topGroup.redrawContents()})),this.s.topGroup.dom.container.unbind("dtsb-clearContents"),this.s.topGroup.dom.container.on("dtsb-clearContents.dtsb",(function(){t._setUp(!1),t._filterChanged(0),t.s.dt.draw()}))},t.prototype._setEmptyListener=function(){var t=this;this.s.topGroup.dom.add.on("click.dtsb",(function(){t._checkClear()})),this.s.topGroup.dom.container.on("dtsb-destroy.dtsb",(function(){t.dom.clearAll.remove()}))},t.version="1.8.2",t.classes={button:"dtsb-button",clearAll:"dtsb-clearAll",container:"dtsb-searchBuilder",inputButton:"dtsb-iptbtn",title:"dtsb-title",titleRow:"dtsb-titleRow"},t.defaults={columns:!0,conditions:{date:a.dateConditions,html:a.stringConditions,"html-num":a.numConditions,"html-num-fmt":a.numFmtConditions,luxon:a.luxonDateConditions,moment:a.momentDateConditions,num:a.numConditions,"num-fmt":a.numFmtConditions,string:a.stringConditions},depthLimit:!1,enterSearch:!1,filterChanged:void 0,greyscale:!1,liveSearch:!0,i18n:{add:"Add Condition",button:{0:"Search Builder",_:"Search Builder (%d)"},clearAll:"Clear All",condition:"Condition",conditions:{array:{contains:"Contains",empty:"Empty",equals:"Equals",not:"Not",notEmpty:"Not Empty",without:"Without"},date:{after:"After",before:"Before",between:"Between",empty:"Empty",equals:"Equals",not:"Not",notBetween:"Not Between",notEmpty:"Not Empty"},number:{between:"Between",empty:"Empty",equals:"Equals",gt:"Greater Than",gte:"Greater Than Equal To",lt:"Less Than",lte:"Less Than Equal To",not:"Not",notBetween:"Not Between",notEmpty:"Not Empty"},string:{contains:"Contains",empty:"Empty",endsWith:"Ends With",equals:"Equals",not:"Not",notContains:"Does Not Contain",notEmpty:"Not Empty",notEndsWith:"Does Not End With",notStartsWith:"Does Not Start With",startsWith:"Starts With"}},data:"Data",delete:"&times",deleteTitle:"Delete filtering rule",left:"<",leftTitle:"Outdent criteria",logicAnd:"And",logicOr:"Or",right:">",rightTitle:"Indent criteria",search:"Search",title:{0:"Custom Search Builder",_:"Custom Search Builder (%d)"},value:"Value",valueJoiner:"and"},logic:"AND",orthogonal:{display:"display",search:"filter"},preDefined:!1},t}();
/*! SearchBuilder 1.8.2
     * Â©SpryMedia Ltd - datatables.net/license/mit
     */d=c=e,l=c.fn.DataTable,function(t){o=t,t.fn.dataTable}(e),function(i){t=i,n=i.fn.dataTable}(e);var p=e.fn.dataTable;i.SearchBuilder=h,p.SearchBuilder=h,i.Group=u,p.Group=u,i.Criteria=a,p.Criteria=a;var m=i.Api.register;function f(t,e){var n=new i.Api(t),s=e||(n.init().searchBuilder||i.defaults.searchBuilder);return new h(n,s).getNode()}i.ext.searchBuilder={conditions:{}},i.ext.buttons.searchBuilder={action:function(t,i,n,s){this.popover(s._searchBuilder.getNode(),{align:"container",span:"container"});var r=s._searchBuilder.s.topGroup;void 0!==r&&r.dom.container.trigger("dtsb-redrawContents-noDraw"),0===r.s.criteria.length&&e("."+e.fn.dataTable.Group.classes.add.replace(/ /g,".")).click()},config:{},init:function(t,e,n){var s=this,r=new i.SearchBuilder(t,n.config);t.on("draw",(function(){var i=r.s.topGroup?r.s.topGroup.count():0;s.text(t.i18n("searchBuilder.button",r.c.i18n.button,i))})),s.text(n.text||t.i18n("searchBuilder.button",r.c.i18n.button,0)),n._searchBuilder=r},text:null},m("searchBuilder.getDetails()",(function(t){void 0===t&&(t=!1);var i=this.context[0];return i._searchBuilder?i._searchBuilder.getDetails(t):null})),m("searchBuilder.rebuild()",(function(t,i){void 0===i&&(i=!0);var e=this.context[0];return void 0===e._searchBuilder?null:(e._searchBuilder.rebuild(t,i),this)})),m("searchBuilder.container()",(function(){var t=this.context[0];return t._searchBuilder?t._searchBuilder.getNode():null})),e(document).on("preInit.dt.dtsp",(function(t,e){"dt"===t.namespace&&(e.oInit.searchBuilder||i.defaults.searchBuilder)&&(e._searchBuilder||f(e))})),i.ext.feature.push({cFeature:"Q",fnInit:f}),i.feature&&i.feature.register("searchBuilder",f)}();
