/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/datatables.net-colreorder@2.1.0/js/dataTables.colReorder.mjs
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import t from"jquery";import e from"datatables.net";export{default}from"datatables.net";
/*! ColReorder 2.1.0
 * © SpryMedia Ltd - datatables.net/license
 */let r=t;function o(t,e,r,o){var n=t.splice(e,r);n.unshift(0),n.unshift(o<e?o:o-r+1),t.splice.apply(t,n)}function n(t){t.rows().invalidate("data"),t.column(0).visible(t.column(0).visible()),t.columns.adjust();var e=t.colReorder.order();t.trigger("columns-reordered",[{order:e,mapping:l(e)}])}function i(t){return t.settings()[0].aoColumns.map((function(t){return t._crOriginalIdx}))}function s(t,e,r,n){for(var i=[],s=0;s<t.length;s++){var a=t[s];o(a,r[0],r.length,n);for(var l=0;l<a.length;l++){var c=a[l].cell;if(!i.includes(c)){var u=c.getAttribute("data-dt-column").split(",").map((function(t){return e[t]})).join(",");c.setAttribute("data-dt-column",u),i.push(c)}}}}function a(t){t.columns().iterator("column",(function(t,e){var r=t.aoColumns;void 0===r[e]._crOriginalIdx&&(r[e]._crOriginalIdx=e)}))}function l(t){for(var e=[],r=0;r<t.length;r++)e[t[r]]=r;return e}function c(t,e,r){var n,i,a=t.settings()[0],c=a.aoColumns,d=c.map((function(t,e){return e}));if(!e.includes(r)){o(d,e[0],e.length,r);var h=l(d);for(o(c,e[0],e.length,r),n=0;n<a.aoData.length;n++){var f=a.aoData[n];if(f){var g=f.anCells;if(g)for(o(g,e[0],e.length,r),i=0;i<g.length;i++)f.nTr&&g[i]&&c[i].bVisible&&f.nTr.appendChild(g[i]),g[i]&&g[i]._DT_CellIndex&&(g[i]._DT_CellIndex.column=i)}}for(n=0;n<c.length;n++){var m=c[n];for(i=0;i<m.aDataSort.length;i++)m.aDataSort[i]=h[m.aDataSort[i]];m.idx=h[m.idx],m.bVisible&&a.colgroup.append(m.colEl)}s(a.aoHeader,h,e,r),s(a.aoFooter,h,e,r),o(a.aoPreSearchCols,e[0],e.length,r),u(h,a.aaSorting),Array.isArray(a.aaSortingFixed)?u(h,a.aaSortingFixed):(a.aaSortingFixed.pre||a.aaSortingFixed.post)&&u(h,a.aaSortingFixed.pre),a.aLastSort.forEach((function(t){t.src=h[t.src]})),t.trigger("column-reorder",[t.settings()[0],{from:e,to:r,mapping:h}])}}function u(t,e){if(e)for(var o=0;o<e.length;o++){var n=e[o];"number"==typeof n?e[o]=t[n]:r.isPlainObject(n)&&void 0!==n.idx?n.idx=t[n.idx]:Array.isArray(n)&&"number"==typeof n[0]&&(n[0]=t[n[0]])}}function d(t,e,r){var i,s=!1;if(e.length===t.columns().count()){r&&(e=h(t,e,"toCurrent"));var a=l(e);for(i=0;i<a.length;i++){var u=a.indexOf(i);i!==u&&(o(a,u,1,i),c(t,[u],i),s=!0)}s&&n(t)}else t.error("ColReorder - column count mismatch")}function h(t,e,r){var o=t.colReorder.order(),n=t.settings()[0].aoColumns;return"toCurrent"===r||"fromOriginal"===r?Array.isArray(e)?e.map((function(t){return o.indexOf(t)})):o.indexOf(e):Array.isArray(e)?e.map((function(t){return n[t]._crOriginalIdx})):n[e]._crOriginalIdx}function f(t,e,r){var o=t.columns().count();return!(e[0]<r&&r<e[e.length])&&(!(e[0]<0&&e[e.length-1]>o)&&(!(r<0&&r>o)&&(!!e.includes(r)||!!g(t.table().header.structure(),e,r)&&!!g(t.table().footer.structure(),e,r))))}function g(t,e,r){var n,i=function(t){for(var e=[],r=0;r<t.length;r++){e.push([]);for(var o=0;o<t[r].length;o++){var n=t[r][o];if(n)for(var i=0;i<n.rowspan;i++){e[r+i]||(e[r+i]=[]);for(var s=0;s<n.colspan;s++)e[r+i][o+s]=n.cell}}}return e}(t);for(n=0;n<i.length;n++)o(i[n],e[0],e.length,r);for(n=0;n<i.length;n++)for(var s=[],a=0;a<i[n].length;a++){var l=i[n][a];if(s.includes(l)){if(s[s.length-1]!==l)return!1}else s.push(l)}return!0}var m=function(){function t(e,o){this.dom={drag:null},this.c={columns:null,enable:null,headerRows:null,order:null},this.s={dropZones:[],mouse:{absLeft:-1,offset:{x:-1,y:-1},start:{x:-1,y:-1},target:null,targets:[]},scrollInterval:null};var n=this;if(!e.settings()[0]._colReorder){e.settings()[0]._colReorder=this,this.dt=e,r.extend(this.c,t.defaults,o),a(e),e.on("stateSaveParams",(function(t,r,o){o.colReorder=i(e)})),e.on("destroy",(function(){e.off(".colReorder"),e.colReorder.reset()}));var s=e.state.loaded(),l=this.c.order;s&&s.colReorder&&(l=s.colReorder),l&&e.ready((function(){d(e,l,!0)})),e.table().header.structure().forEach((function(t,e){for(var r=o.headerRows,i=0;i<t.length;i++)r&&!r.includes(e)||t[i]&&t[i].cell&&n._addListener(t[i].cell)}))}}return t.prototype.disable=function(){return this.c.enable=!1,this},t.prototype.enable=function(t){return void 0===t&&(t=!0),!1===t?this.disable():(this.c.enable=!0,this)},t.prototype._addListener=function(t){var e=this;r(t).on("selectstart.colReorder",(function(){return!1})).on("mousedown.colReorder touchstart.colReorder",(function(t){if(("mousedown"!==t.type||1===t.which)&&e.c.enable){var o=r("button.dtcc-button_reorder",this);o.length&&t.target!==o[0]&&0===o.find(t.target).length||e._mouseDown(t,this)}}))},t.prototype._createDragNode=function(){var t=this.s.mouse.target,e=t.parent(),o=e.parent(),n=o.parent(),i=t.clone();this.dom.drag=r(n[0].cloneNode(!1)).addClass("dtcr-cloned").append(r(o[0].cloneNode(!1)).append(r(e[0].cloneNode(!1)).append(i[0]))).css({position:"absolute",top:0,left:0,width:r(t).outerWidth(),height:r(t).outerHeight()}).appendTo("body")},t.prototype._cursorPosition=function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0][e]:t[e]},t.prototype._mouseDown=function(t,e){for(var o=this,n=r(t.target).closest("th, td"),i=n.offset(),s=this.dt.columns(this.c.columns).indexes().toArray(),a=r(e).attr("data-dt-column").split(",").map((function(t){return parseInt(t,10)})),l=0;l<a.length;l++)if(!s.includes(a[l]))return!1;this.s.mouse.start.x=this._cursorPosition(t,"pageX"),this.s.mouse.start.y=this._cursorPosition(t,"pageY"),this.s.mouse.offset.x=this._cursorPosition(t,"pageX")-i.left,this.s.mouse.offset.y=this._cursorPosition(t,"pageY")-i.top,this.s.mouse.target=n,this.s.mouse.targets=a;for(var c=0;c<a.length;c++){var u=this.dt.cells(null,a[c],{page:"current"}).nodes().to$(),d="dtcr-moving";0===c&&(d+=" dtcr-moving-first"),c===a.length-1&&(d+=" dtcr-moving-last"),u.addClass(d)}this._regions(a),this._scrollRegions(),r(document).on("mousemove.colReorder touchmove.colReorder",(function(t){o._mouseMove(t)})).on("mouseup.colReorder touchend.colReorder",(function(t){o._mouseUp(t)}))},t.prototype._mouseMove=function(t){if(null===this.dom.drag){if(Math.pow(Math.pow(this._cursorPosition(t,"pageX")-this.s.mouse.start.x,2)+Math.pow(this._cursorPosition(t,"pageY")-this.s.mouse.start.y,2),.5)<5)return;r(document.body).addClass("dtcr-dragging"),this._createDragNode()}this.dom.drag.css({left:this._cursorPosition(t,"pageX")-this.s.mouse.offset.x,top:this._cursorPosition(t,"pageY")-this.s.mouse.offset.y});var e,o=this.dt.table().node(),n=r(o).offset().left,i=this._cursorPosition(t,"pageX")-n;if(this._isRtl()){var s=o.clientWidth;e=s-i}else e=i;var a=this.s.dropZones.find((function(t){return t.inlineStart<=e&&e<=t.inlineStart+t.width}));this.s.mouse.absLeft=this._cursorPosition(t,"pageX"),a&&(a.self||this._move(a,e))},t.prototype._mouseUp=function(t){var e=this;r(document).off(".colReorder"),r(document.body).removeClass("dtcr-dragging"),this.dom.drag&&(this.dom.drag.remove(),this.dom.drag=null,this.s.mouse.target.on("click.dtcr",(function(t){return!1})),setTimeout((function(){e.s.mouse.target.off(".dtcr")}),10)),this.s.scrollInterval&&clearInterval(this.s.scrollInterval),this.dt.cells(".dtcr-moving").nodes().to$().removeClass("dtcr-moving dtcr-moving-first dtcr-moving-last")},t.prototype._move=function(t,e){var o=this;this.dt.colReorder.move(this.s.mouse.targets,t.colIdx),this.s.mouse.targets=r(this.s.mouse.target).attr("data-dt-column").split(",").map((function(t){return parseInt(t,10)})),this._regions(this.s.mouse.targets);var n=this.s.mouse.targets.filter((function(t){return o.dt.column(t).visible()})),i=this.s.dropZones.find((function(t){return t.colIdx===n[0]})),s=this.s.dropZones.indexOf(i);if(i.inlineStart>e){var a=i.inlineStart-e,l=this.s.dropZones[s-1];i.inlineStart-=a,i.width+=a,l&&(l.width-=a)}if((i=this.s.dropZones.find((function(t){return t.colIdx===n[n.length-1]}))).inlineStart+i.width<e){var c=e-(i.inlineStart+i.width),u=this.s.dropZones[s+1];i.width+=c,u&&(u.inlineStart+=c,u.width-=c)}},t.prototype._regions=function(t){var e=this,r=[],o=0,n=0,i=this.dt.columns(this.c.columns).indexes().toArray(),s=this.dt.columns().widths();this.dt.columns().every((function(a,l,c){if(this.visible()){var u=s[a];if(i.includes(a))f(e.dt,t,a)?r.push({colIdx:a,inlineStart:o-n,self:t[0]<=a&&a<=t[t.length-1],width:u+n}):a<t[0]?r.length&&(r[r.length-1].width+=u):a>t[t.length-1]&&(n+=u),o+=u;else o+=u}})),this.s.dropZones=r},t.prototype._isScrolling=function(){return this.dt.table().body().parentNode!==this.dt.table().header().parentNode},t.prototype._scrollRegions=function(){if(this._isScrolling()){var t=this,e=r(this.dt.table().container()).offset().left,o=r(this.dt.table().container()).outerWidth(),n=this.dt.table().body().parentElement.parentElement;this.s.scrollInterval=setInterval((function(){var r=t.s.mouse.absLeft;-1!==r&&(r<e+75&&n.scrollLeft?n.scrollLeft-=5:r>e+o-75&&n.scrollLeft<n.scrollWidth&&(n.scrollLeft+=5))}),25)}},t.prototype._isRtl=function(){return"rtl"===r(this.dt.table()).css("direction")},t.defaults={columns:"",enable:!0,headerRows:null,order:null},t.version="2.1.0",t}();
/*! ColReorder 2.1.0
 * © SpryMedia Ltd - datatables.net/license
 */
/**
 * @summary     ColReorder
 * @description Provide the ability to reorder columns in a DataTable
 * @version     2.1.0
 * @author      SpryMedia Ltd
 * @contact     datatables.net
 * @copyright   SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license/mit
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */e.Api.register("colReorder.enable()",(function(t){return this.iterator("table",(function(e){e._colReorder&&e._colReorder.enable(t)}))})),e.Api.register("colReorder.disable()",(function(){return this.iterator("table",(function(t){t._colReorder&&t._colReorder.disable()}))})),e.Api.register("colReorder.move()",(function(t,e){return a(this),Array.isArray(t)||(t=[t]),f(this,t,e)?this.tables().every((function(){c(this,t,e),n(this)})):(this.error("ColReorder - invalid move"),this)})),e.Api.register("colReorder.order()",(function(t,e){return a(this),t?this.tables().every((function(){d(this,t,e)})):this.context.length?i(this):null})),e.Api.register("colReorder.reset()",(function(){return a(this),this.tables().every((function(){d(this,this.columns().every((function(t){return t})).flatten().toArray(),!0)}))})),e.Api.register("colReorder.transpose()",(function(t,e){return a(this),e||(e="toCurrent"),h(this,t,e)})),e.ColReorder=m,r(document).on("stateLoadInit.dt",(function(t,r,o){if("dt"===t.namespace){var n=new e.Api(r);if(o.colReorder)if(n.ready())d(n,o.colReorder,!0);else if(u(o.colReorder,o.order),o.columns){for(var i=0;i<o.columns.length;i++)o.columns[i]._cr_sort=o.colReorder[i];o.columns.sort((function(t,e){return t._cr_sort-e._cr_sort}))}}})),r(document).on("preInit.dt",(function(t,o){if("dt"===t.namespace){var n=o.oInit.colReorder,i=e.defaults.colReorder;if(n||i){var s=r.extend({},i,n);if(!1!==n){var a=new e.Api(o);new m(a,s)}}}}));
